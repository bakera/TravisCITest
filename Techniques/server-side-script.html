<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US"><head><title>Server-side Scripting Techniques  | Techniques for WCAG 2.0
            </title><link rel="canonical" href="http://www.w3.org/TR/WCAG20-TECHS/server-side-script"/><link rel="stylesheet" type="text/css" href="slicenav.css"/><link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/2016/W3C-WG-NOTE.css"/><link rel="stylesheet" type="text/css" href="additional.css"/><link rel="stylesheet" type="text/css" href="bytech.css"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/></head><body class="slices"><div id="masthead"><p class="logo"><a href="http://www.w3.org/"><img width="72" height="48" alt="W3C" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C"/></a></p><p class="collectiontitle"><a href="./">Techniques for WCAG 2.0</a></p></div><div id="skipnav"><p class="skipnav"><a href="#maincontent">Skip to Content (Press Enter)</a></p></div><a name="top"> </a><div class="div1"><a name="maincontent"/><h1 id="techs">Server-side Scripting Techniques for WCAG 2.0</h1><p>This Web page lists Server-side Scripting Techniques from <a href="Overview.html">Techniques for WCAG 2.0: Techniques and Failures for Web Content Accessibility Guidelines 2.0</a>. Technology-specific techniques do not replace the general techniques: content developers should consider both general techniques and technology-specific techniques as they work toward conformance.</p><p>Publication of techniques for a specific technology does not imply that the technology can be used in all situations to create content that meets WCAG 2.0 success criteria and conformance requirements. Developers need to be aware of the limitations of specific technologies and provide content in a way that is accessible to people with disabilities. </p><p>For information about the techniques, see <a href="intro.html">Introduction to Techniques for WCAG 2.0</a>. For a list of techniques for other technologies, see the <a href="Overview.html#contents">Table of Contents</a>.</p><div id="toc"><h2>Table of Contents</h2>
<ul class="toc"><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/#abstract">Abstract </a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/#status">Status of This Document </a></li><li><a href="#SVR1">SVR1: Implementing automatic redirects on the server side instead of on the
                    client side</a></li><li><a href="#SVR2">SVR2: Using .htaccess to ensure that the only way to access non-conforming content is from conforming content</a></li><li><a href="#SVR3">SVR3: Using HTTP referer to ensure that the only way to access non-conforming content is from conforming content</a></li><li><a href="#SVR4">SVR4: Allowing users to provide preferences for the display of conforming alternate versions</a></li><li><a href="#SVR5">SVR5: Specifying the default language in the HTTP header</a></li></ul><hr/></div><div class="body"><div class="div1">
		<div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SVR1" id="SVR1"> </a>SVR1: Implementing automatic redirects on the server side instead of on the
                    client side</h2><div class="applicability"><h3 id="SVR1-applicability">Applicability</h3><div class="textbody"><p> Server-side technologies, including server-side scripting languages and
                        server configuration files with URLs or URL patterns for redirects. </p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#consistent-behavior-no-extreme-changes-context">
				Success Criterion 3.2.5 (Change on Request)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#consistent-behavior-no-extreme-changes-context">
						How to Meet 3.2.5 (Change on Request)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/consistent-behavior-no-extreme-changes-context.html">
						Understanding Success Criterion 3.2.5 (Change on Request)
					</a></li></ul></li></ul><h3 id="SVR1-description">Description</h3><div class="textbody"><p> The objective of this technique is to avoid confusion that may be caused
                        when two new pages are loaded in quick succession because one page (the one
                        requested by the user) redirects to another. Some user agents support the
                        use of the HTML <code>meta</code> element to redirect the user to another page
                        after a specified number of seconds. This makes a page inaccessible to some
                        users, especially users with screen readers. Server-side technologies
                        provide methods to implement redirects in a way that does not confuse users.
                        A server-side script or configuration file can cause the server to send an
                        appropriate HTTP response with a status code in the 3xx range and a Location
                        header with another URL. When the browser receives this response, the location
                        bar changes and the browser makes a request with the new URL. </p></div><h3 class="small-head" id="SVR1-examples">Examples</h3><h4 class="small-head" id="SVR1-ex1">Example 1: JSP/Servlets</h4><div class="example"><div class="textbody"><p> In Java Servlets or JavaServer Pages (JSP), developers can use
                                    <code>HttpServletResponse.sendRedirect(String url)</code>. </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
…
public void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
…
  response.sendRedirect("/newUserLogin.do");
}</code></pre></div><div class="textbody"><p> This sends a response with a 302 status code ("Found") and a
                                Location header with the new URL to the user agent. It is also
                                possible to set another status code with
                                    <code>response.sendError(int code, String message)</code> with
                                one of the constants defined in the interface
                                javax.servlet.http.HttpServletResponse as status code. </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
…
public void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
…
  response.sendError(response.SC_MOVED_PERMANENTLY, "/newUserLogin.do");
}</code></pre></div><div class="textbody"><p> If an application uses <code>HttpServletResponse.encodeURL(String
                                    url)</code> for URL rewriting because the application depends on
                                sessions, the method
                                    <code>HttpServletResponse.encodeRedirectURL(String url)</code>
                                should be used instead of
                                    <code>HttpServletResponse.sendRedirect(String url)</code>. It is
                                also possible to rewrite a URL with
                                    <code>HttpServletResponse.encodeURL(String url)</code> and then
                                pass this URL to <code>HttpServletResponse.sendRedirect(String
                                url)</code>. </p></div></div><h4 class="small-head" id="SVR1-ex2">Example 2: ASP</h4><div class="example"><div class="textbody"><p> In Active Server Page (ASP) with VBScript, developers can use
                                    <code>Response.Redirect</code>. </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
  Response.Redirect "newUserLogin.asp"</code></pre></div><div class="textbody"><p> or </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
Response.Redirect("newUserLogin.asp")</code></pre></div><div class="textbody"><p> The code below is a more complete example with a specific HTTP
                                status code. </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
Response.Clear
Response.Status = 301
Response.AddHeader "Location", "newUserLogin.asp"
Response.Flush
Response.End</code></pre></div></div><h4 class="small-head" id="SVR1-ex3">Example 3: PHP</h4><div class="example"><div class="textbody"><p> In PHP, developers can send a raw HTTP header with the
                                <code>header</code> method. The code below sends a 301 status code
                                and a new location. If the status is not explicitly set, the
                                redirect response sends an HTTP status code 302. </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
 &lt;?php
header("HTTP/1.1 301 Moved Permanently);
header("Location: http://www.example.com/newUserLogin.php");
?&gt;</code></pre></div></div><h4 class="small-head" id="SVR1-ex4">Example 4: Apache</h4><div class="example"><div class="textbody"><p> Developers can configure the Apache Web server to handle redirects,
                                as in the following example. </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
redirect 301 /oldUserLogin.jsp http://www.example.com/newUserLogin.do</code></pre></div></div><h3 id="SVR1-resources">Resources</h3><div class="textbody"><p>Resources are for information purposes only, no endorsement implied.</p><ul><li><p> 
                  <a href="http://www.w3.org/QA/Tips/reback">Use standard
                                        redirects: do not break the back button!</a> (W3C QA Tip).
                                </p></li><li><p> 
                  <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3">HTTP/1.1 Status Code Definitions: Redirection 3xx</a>.
                                </p></li><li><p> 
                  <a href="http://www.somacon.com/p145.php">HTTP 301 Permanent
                                        Redirection Techniques</a> by Shailesh N. Humbad. </p></li><li><p> 
                  <a href="http://docs.oracle.com/cd/E17802_01/products/products/servlet/2.3/javadoc/javax/servlet/http/HttpServletResponse.html">Interface javax.servlet.http.HttpServletResponse</a> in
                                    the Java Servlets 2.3 API documentation. </p></li><li><p> 
                  <a href="http://php.net/manual/en/function.header.php">header</a> in the PHP
                                    Manual. </p></li><li><p> 
                  <a href="http://httpd.apache.org/docs/2.2/mod/mod_alias.html">Apache Module mod_alias</a> in the <a href="http://httpd.apache.org/docs/2.2/">Apache HTTP Server
                                        Version 2.2 Documentation</a> describes how redirects can
                                    be specified in Apache 2.2. </p></li><li><p> 
                  <a href="http://httpd.apache.org/docs/1.3/mod/mod_alias.html">Module mod_alias</a> in the <a href="http://httpd.apache.org/docs/1.3/">Apache HTTP Server
                                        Version 1.3 Documentation</a> describes how redirects can
                                    be specified in Apache 1.3. </p></li></ul></div><h3 id="SVR1-related-techs">Related Techniques</h3><div class="textbody"><p>(none currently listed)</p></div><h3 id="SVR1-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SVR1-procedure">Procedure</h4><ol class="enumar"><li><p> Find each link or programmatic reference to another page or
                                    Web page. </p></li><li><p> For each link or programmatic reference to a URI in the set of
                                    Web pages being evaluated, check if the referenced
                                    Web page contains code (e.g., meta element or script) that
                                    causes a client-side redirect. </p></li><li><p> For each link or programmatic reference to a URI in the set of
                                    Web pages being evaluated, check if the referenced URI
                                    does not cause a redirect OR causes a server-side redirect
                                    without a time-out. </p></li></ol><h4 class="small-head" id="SVR1-results">Expected Results</h4><ul><li><p> Step 2 is false AND step 3 is true. </p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SVR2" id="SVR2"> </a>SVR2: Using .htaccess to ensure that the only way to access non-conforming content is from conforming content</h2><div class="applicability"><h3 id="SVR2-applicability">Applicability</h3><div class="textbody"><p>Content residing on a Web server that supports .htaccess (typically Apache) where a conforming version of content is provided as an alternative to a non-conforming version.</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#cc1">
					Conformance Requirement 1 (Conformance Level)
				</a></li></ul><h3 id="SVR2-description">Description</h3><div class="textbody"><p>The objective of this technique is to ensure that users can always access an accessible version of the content when non-conforming versions are also available. Whenever content is provided in a format that does not conform to WCAG, the site as a whole can still conform if alternate versions of the inaccessible content are provided. Conformance Requirement 4 requires that alternate versions can be derived from the nonconforming content or from its URI. 
</p><p>Since it is not always possible to provide an accessible link from within non-conforming content, this technique describes how authors can use Apache's Module "mod_access" to ensure that non-conforming content can only be accessed from URIs that serve as alternate versions to the non-conforming content or from pages that include links to both the non-conforming version and the alternative version.</p></div><h3 class="small-head" id="SVR2-examples">Examples</h3><h4 class="small-head" id="SVR2-ex1">Example 1</h4><div class="example"><div class="textbody"><p>The following .htaccess file uses Apache's mod_redirect module to redirect requests for "inaccessible.html" to "accessible.html" unless the request comes from "accessible.html".</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
# If the request for inaccessible content comes from a file 
# called accessible.html, then set an environment variable that 
# allows the inaccessible version to be displayed.
SetEnvIf Referer .*(accessible.html)$ let_me_in
&lt;FilesMatch ^(inaccessible.html)$&gt;
    Order Deny,Allow
    Deny from all
    Allow from env=let_me_in
&lt;/FilesMatch&gt;

# If the request comes from anyplace but accessible.html, then 
# redirect the error condition to a location where the accessible 
# version resides
ErrorDocument 403 /example_directory/accessible.html
</code></pre></div></div><h4 class="small-head" id="SVR2-ex2">Example 2</h4><div class="example"><div class="textbody"><p>This example assumes a directory structure where documents are available in multiple formats. One of the formats does not meet WCAG at the level claimed and uses the file extension "jna" (Just Not Accessible). All of these files are stored in a folder called "jna" with an .htaccess file which ensures that any direct request for a file with the .jna extension from pages where inaccessible versions are not already available is redirected to an index page that lists all of the available formats.</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
# If the request for inaccessible content comes from a file at 
# http://example.com/documents/index.html, then set an environment 
# variable that allows the inaccessible version to be displayed.
SetEnvIf Referer ^http://example.com/documents/index.html$ let_me_in
&lt;FilesMatch ^(.*\.jna)$&gt;
    Order Deny,Allow
    Deny from all
    Allow from env=let_me_in
&lt;/FilesMatch&gt;

# If the request comes from anyplace but http://example.com/documents/index.html, then 
# redirect the error condition to a location where a link the accessible 
# version resides
ErrorDocument 403 http://example.com/documents/index.html
</code></pre></div></div><h3 id="SVR2-resources">Resources</h3><div class="textbody"><p>Resources are for information purposes only, no endorsement implied.</p><ul><li><p> 
                  <a href="http://httpd.apache.org/docs/2.2/mod/mod_env.html">Apache Module mod_env</a> 
               </p></li><li><p> 
                  <a href="http://httpd.apache.org/docs/2.2/howto/auth.html">Authentication, Authorization and Access Control</a> 
               </p></li><li><p> 
                  <a href="http://httpd.apache.org/docs/2.0/howto/htaccess.html">Apache Tutorial: .htaccess files</a> 
               </p></li></ul></div><h3 id="SVR2-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G136">G136: Providing a link at the beginning of a nonconforming Web page that points to a conforming alternate version</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G190">G190: Providing a link adjacent to or associated with a non-conforming object that links to a conforming alternate version</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SVR3">SVR3: Using HTTP referer to ensure that the only way to access non-conforming content is from conforming content</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SVR4">SVR4: Allowing users to provide preferences for the display of conforming alternate versions</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/C29">C29: Using a style switcher to provide a conforming alternate version</a></li></ul></div><h3 id="SVR2-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SVR2-procedure">Procedure</h4><ol class="enumar"><li><p>Identify pages that do not conform to WCAG at the conformance Level claimed where accessible alternatives are served based on the use of .htaccess files.
    </p></li><li><p>Visit the URI of the non-conforming content.
    </p></li><li><p>Verify that the resulting page is one of the following:</p><ol class="enumla"><li><p>a <a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#conforming-alternate-versiondef" class="gl-ref">conforming alternate version</a> for the non-conforming content</p></li><li><p>a page that includes a link to both the conforming alternate version and the non-conforming content</p></li></ol></li></ol><h4 class="small-head" id="SVR2-results">Expected Results</h4><ul><li><p>Check #3.1 or #3.2 is true.</p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SVR3" id="SVR3"> </a>SVR3: Using HTTP referer to ensure that the only way to access non-conforming content is from conforming content</h2><div class="applicability"><h3 id="SVR3-applicability">Applicability</h3><div class="textbody"><p>Content created using server-side scripting where a conforming version of content is provided as an alternative to a non-conforming version based on HTTP Referer.</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#cc1">
					Conformance Requirement 1 (Conformance Level)
				</a></li></ul><div class="ua-issues"><h3 class="small-head" id="ua1.3.1"> User Agent and Assistive Technology Support Notes</h3><p>See <a href="/WAI/WCAG20/Techniques/ua-notes/server-side-script#SVR3">User Agent Support Notes for SVR3</a>.</p></div><h3 id="SVR3-description">Description</h3><div class="textbody"><p>The objective of this technique is to ensure that users can obtain an accessible version of content where both non-conforming and conforming versions are provided.</p><p>
         <a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#cc1" class="gl-ref">Conformance Requirement 1</a> allows non-conforming pages to be included within the scope of conformance as long as they have a "<a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#conforming-alternate-versiondef" class="gl-ref">conforming alternate version</a>". It is not always possible for authors to include accessibility supported links to conforming content from within non-conforming content. Therefore, authors may need to rely on the use of Server Side Scripting technologies (ex. PHP, ASP, JSP) to ensure that the non-conforming version can only be reached from a conforming page.</p><p>This technique describes how to use information provided by the <code>HTTP referer</code> to ensure that non-conforming content can only be reached from a conforming page. The <code>HTTP referer</code> header is set by the user agent and contains the URI of the page (if any) which referred the user agent to the non-conforming page.</p><p>To implement this technique, an author identifies the URI for the conforming version of the content, for each non-conforming page. When a request for the non-conforming version of a page is received, the server compares the value of the <code>HTTP referer</code> header against the URI of the conforming version to determine whether the link to the non-conforming version came from the conforming version. The non-conforming version is only served if the <code>HTTP referer</code> matches the URI of the non-conforming version. Otherwise, the user is redirected to the conforming version of the content. Note that when comparing the URI in the HTTP referer header, non-relevant variations in the URI, such as in the query and target, should be taken into account.</p></div><h3 class="small-head" id="SVR3-examples">Examples</h3><h4 class="small-head" id="SVR3-ex1">Example 1: Interactive demonstrations of physical processes</h4><div class="example"><div class="textbody"><p>An online physics course uses a proprietary modeling language to provide interactive demonstrations of physical processes. The user agent for the modeling language is not compatible with assistive technology. The site includes a script that uses the HTTP referer to ensure that unless users attempt to access the interactive demonstration from a page that contains a conforming description of the process and models, the server redirects the request to a conforming page which contains a link to the non-conforming version. Students may choose to access the non-conforming, interactive version, but those who do not are still able to learn about the process.</p></div></div><h4 class="small-head" id="SVR3-ex2">Example 2: Using Http referer in PHP</h4><div class="example"><div class="textbody"><p>The following example illustrates how this technique can be used in PHP. It includes two files, conforming.php and non-conforming.php which work together to ensure that the only way to access non-conforming content is from conforming content.</p><p>conforming.php:</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
	&lt;head&gt;
    		&lt;meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /&gt;
    		&lt;title&gt;Conforming Content&lt;/title&gt;
    	&lt;/head&gt;
	&lt;body&gt;
		&lt;h1&gt;This is a conforming page&lt;/h1&gt;
		&lt;p&gt;From here, you can visit the &lt;a href="non-conforming.php"&gt;non-conforming 
		page&lt;/a&gt;. &lt;/p&gt;
	&lt;/body&gt;
&lt;/html&gt;
    				</code></pre></div><div class="textbody"><p>non-conforming.php:</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;?php 
// if the request comes from a file that contains the string "conforming.php" then render the page
	if(stristr($_SERVER['HTTP_REFERER'], "conforming.php")) {
?&gt;

&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
	&lt;head&gt;
		&lt;meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /&gt;
		&lt;title&gt;Non-Conforming Content&lt;/title&gt;
	&lt;/head&gt;
	&lt;body&gt;
		&lt;h1&gt;This is a non-conforming page&lt;/h1&gt;
		&lt;p&gt;Because you came from &lt;?php echo $_SERVER['HTTP_REFERER']; ?&gt;, you are 
			able to view the content on this page. &lt;/p&gt;
	&lt;/body&gt;
&lt;/html&gt;
&lt;?php
}
// if the referring page is not conforming.php, then redirect the user to the conforming version
else  {
header("Location: conforming.php");
}
?&gt;					
    				</code></pre></div><div class="textbody"><p>A working example, <a href="/WAI/WCAG20/Techniques/working-examples/SVR3/non-conforming.php" class="ex-ref">Conforming content</a>, is available.</p></div></div><h3 id="SVR3-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G136">G136: Providing a link at the beginning of a nonconforming Web page that points to a conforming alternate version</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G190">G190: Providing a link adjacent to or associated with a non-conforming object that links to a conforming alternate version</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SVR2">SVR2: Using .htaccess to ensure that the only way to access non-conforming content is from conforming content</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SVR4">SVR4: Allowing users to provide preferences for the display of conforming alternate versions</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/C29">C29: Using a style switcher to provide a conforming alternate version</a></li></ul></div><h3 id="SVR3-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SVR3-procedure">Procedure</h4><p>Where WCAG-conforming alternatives are provided for non-conforming content:</p><ol class="enumar"><li><p>Identify pages that do not conform to WCAG at the conformance Level claimed where accessible alternatives are served based on HTTP Referrer.</p></li><li><p>Visit the URI of the non-conforming content.</p></li><li><p>Verify that the resulting page is one of the following:</p><ol class="enumla"><li><p>a <a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#conforming-alternate-versiondef" class="gl-ref">conforming alternate version</a> for the non-conforming content</p></li><li><p>a page that includes a link to both the conforming alternate version and the non-conforming content</p></li></ol></li></ol><h4 class="small-head" id="SVR3-results">Expected Results</h4><ul><li><p>Check #3.1 or #3.2 is true.</p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SVR4" id="SVR4"> </a>SVR4: Allowing users to provide preferences for the display of conforming alternate versions</h2><div class="applicability"><h3 id="SVR4-applicability">Applicability</h3><div class="textbody"><p>Content created using server-side scripting to store preferences.</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#cc1">
					Conformance Requirement 1 (Conformance Level)
				</a></li></ul><h3 id="SVR4-description">Description</h3><div class="textbody"><p>The objective of this technique is to provide a mechanism for users to select a preference for an alternate conforming version of a Web page.</p><p>Providing preferences to allow users to view conforming alternate versions can be accomplished in several ways. One common method is to provide a link which triggers a server-side process that sets a session or persistent cookie that the Web server uses to modify the page or redirect the user to the alternate version. Other methods include providing user-specific choices that are stored as part of the user's login information for a system where users sign in to access a Web page or service. </p><p>Users requiring an alternate version will need the mechanism provided in the non-conforming page to be accessible in order to find and use it. The mechanism itself should conform to the accessibility level being claimed. </p></div><h3 class="small-head" id="SVR4-examples">Examples</h3><h4 class="small-head" id="SVR4-ex1">Example 1: Setting a session or persistent cookie to store a user preference </h4><div class="example"><div class="textbody"><p>A Web site offers a link to a "preferences" page on pages within the site. On this page, there is an option to view an alternate version of the site. There may be various aspects of the page that are affected, or the user may be opting to view an entirely alternate version of the site. The preference may be to display a version of the site where video included on the site displays captioning, or it may be offered because the primary site contains accessibility conformance issues that are addressed only via the alternative. </p><p>A Web page author may choose to handle this preference via a cookie, which may be handled via a server-side scripting language such as PHP.</p><p>The preferences page may be offered as follows: </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code> &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
  &lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
      &lt;head&gt;
      &lt;title&gt;Site Preferences&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
      &lt;h1&gt;Site Preferences&lt;/h1&gt;
      &lt;form id="form1" name="site_prefs" method="post" action="pref.php"&gt;
          &lt;fieldset&gt;
              &lt;legend&gt;Which version of the site do you want to view?&lt;/legend&gt;
              &lt;input type="radio" name="site_pref" id="site_pref_reg" value="reg" /&gt;
              &lt;label for="site_pref_reg"&gt;Main version of site&lt;/label&gt;
              &lt;input type="radio" name="site_pref" id="site_pref_axx" value="axx" /&gt;
              &lt;label for="site_pref_axx"&gt;Accessibility-conforming version&lt;/label&gt;
          &lt;/fieldset&gt; 
      &lt;/form&gt;
  &lt;/body&gt;
  &lt;/html&gt;</code></pre></div><div class="textbody"><p>The form is submitted to the pref.php file for processing. A cookie is set, and in this simple example the user's browser is directed to the site home page.</p><p>pref.php: </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>&lt;?php
    if(isset($site_pref)) {
        setcookie("site_pref",$site_pref, time() + (86400 * 30)); //set for 30 days
        header("location: http://www.example.com"); //redirects to home page
    }
?&gt;
</code></pre></div><div class="textbody"><p>The home page starts with code that implements the user's preference. </p><p>index.php: </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>&lt;?
if(isset($site_pref)) {
	if($site_pref="axx") {
	header("location: ./accessible/index.php");
}
?&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
...
</code></pre></div><div class="textbody"><p>For a login-based system, the preference is stored in the user's database record and referred to by the server-side script generating the pages for the user to view. </p></div></div><h3 id="SVR4-resources">Resources</h3><div class="textbody"><p>Resources are for information purposes only, no endorsement implied.</p><ul><li><p>
                  <a href="http://php.net/setcookie">Setting and using cookies in PHP</a>
               </p></li></ul></div><h3 id="SVR4-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G136">G136: Providing a link at the beginning of a nonconforming Web page that points to a conforming alternate version</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G190">G190: Providing a link adjacent to or associated with a non-conforming object that links to a conforming alternate version</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SCR38">SCR38: Creating a conforming alternate version for a web page designed with progressive enhancement</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SVR2">SVR2: Using .htaccess to ensure that the only way to access non-conforming content is from conforming content</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SVR3">SVR3: Using HTTP referer to ensure that the only way to access non-conforming content is from conforming content</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/C29">C29: Using a style switcher to provide a conforming alternate version</a></li></ul></div><h3 id="SVR4-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SVR4-procedure">Procedure</h4><ol class="enumar"><li><p>Change a preference for how pages on the site are displayed. </p></li><li><p>Check that the preference itself or a link to that page where it can be set can be reached from each non-conforming page. </p></li><li><p>Check that Web pages are displayed according to the selected preference. </p></li><li><p>Check that when the preference(s) are set, the Web page conforms as claimed. </p></li><li><p>Verify that the resulting page is a conforming alternate version for the original page. </p></li></ol><h4 class="small-head" id="SVR4-results">Expected Results</h4><ul><li><p>Checks #2 and #3 are true. </p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SVR5" id="SVR5"> </a>SVR5: Specifying the default language in the HTTP header</h2><div class="applicability"><h3 id="SVR5-applicability">Applicability</h3><div class="textbody"><p>Server-side technologies, including server-side scripting languages and server configuration files for setting HTTP headers. </p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#meaning-doc-lang-id">
				Success Criterion 3.1.1 (Language of Page)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#meaning-doc-lang-id">
						How to Meet 3.1.1 (Language of Page)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/meaning-doc-lang-id.html">
						Understanding Success Criterion 3.1.1 (Language of Page)
					</a></li></ul></li></ul><h3 id="SVR5-description">Description</h3><div class="textbody"><p>The objective of this technique is to provide information on the  primary language or languages in a Web Page, in order to identify the  audience of the content. The Content-Language HTTP header can contain a  list of one or more language codes, which can be used for language  negotiation between a user agent and a server. If the language  preferences in a user agent are set correctly, language negotiation can  help the user to find a language version of the content that suits  his/her preferences. </p><p>Note that the Content-Language HTTP header does not serve to  identify the language used for processing the content. The content  processing language can be identified by means of other techniques,  such as the attributes lang and xml:lang in markup languages. </p><p>This technique ensures that the primary language of the  document, as specified for example in the lang or xml:lang attribute,  is listed in the Content-Language HTTP header. </p></div><h3 class="small-head" id="SVR5-examples">Examples</h3><h4 class="small-head" id="SVR5-ex1">Example 1: Setting content language in Java Servlet and JSP</h4><div class="example"><div class="textbody"><p>In Java Servlet or JavaServer Pages (JSP), developers can use response.setHeader("Content-Language", lang), in which "lang" stands for a language tag (for example, "en" for English): </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>…
public void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException 
{
…
  response.setHeader("Content-Language", "en");
  PrintWriter out = response.getWriter();
…
}</code></pre></div></div><h4 class="small-head" id="SVR5-ex2">Example 2: Setting content language in PHP</h4><div class="example"><div class="textbody"><p>In PHP, developers can send a raw HTTP header with the header method. The following example sets the language to French: </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>&lt;?php  header('Content-language: fr');  …  ?&gt;  </code></pre></div></div><h3 id="SVR5-resources">Resources</h3><div class="textbody"><p>Resources are for information purposes only, no endorsement implied.</p><p> 
            <a href="http://www.w3.org/International/questions/qa-http-and-lang">W3C Internationalization FAQ: HTTP and meta for language information</a>
						   </p><p> 
            <a href="http://www.w3.org/TR/2014/NOTE-i18n-html-tech-lang-20140603/#metadata">Declaring metadata about the language(s) of the intended audience</a> in Authoring HTML: Language declarations - W3C Working Group Note 3 June 2014. </p><p> 
            <a href="http://www.ietf.org/rfc/rfc1945.txt">Hypertext Transfer Protocol -- HTTP/1.0 (IETF Request for Comments 1945)</a> (plain text) </p><p> 
            <a href="http://www.ietf.org/rfc/rfc2616.txt">Hypertext Transfer Protocol -- HTTP/1.1 (IETF Request for Comments 2616)</a> (plain text) </p><p> 
            <a href="http://php.net/manual/en/function.header.php">header</a> in the PHP Manual. </p></div><h3 id="SVR5-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/H57">H57:  Using language attributes on the html element </a></li></ul></div><h3 id="SVR5-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SVR5-procedure">Procedure</h4><ol class="enumar"><li><p> Use a Live HTTP Header viewer to find the value of the "Content-Language" header. </p></li><li><p> Check that this value matches the default language of the Web page. </p></li></ol><h4 class="small-head" id="SVR5-results">Expected Results</h4><ul><li><p> Step #2 is true. </p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div><hr class="divider" title="End of techniques"/></div></div></div><div class="back"/></div><div class="footer"><p class="copyright">This Web page is part of <a href="Overview.html">Techniques for WCAG 2.0</a>. The entire document is also available as a <a href="complete.html">single HTML file</a>. See the <a href="http://www.w3.org/WAI/intro/wcag20">The WCAG 2.0 Documents</a> for an explanation of how this document fits in with other Web Content Accessibility Guidelines (WCAG) 2.0 documents.
          	</p><p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2012 <a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p></div><script src="//www.w3.org/scripts/TR/2016/fixup.js" type="text/javascript"/></body></html>