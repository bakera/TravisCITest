<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US"><head><title>Client-side Scripting Techniques  | Techniques for WCAG 2.0
            </title><link rel="canonical" href="http://www.w3.org/TR/WCAG20-TECHS/client-side-script"/><link rel="stylesheet" type="text/css" href="slicenav.css"/><link rel="stylesheet" type="text/css" href="https://www.w3.org/StyleSheets/TR/2016/W3C-WG-NOTE.css"/><link rel="stylesheet" type="text/css" href="additional.css"/><link rel="stylesheet" type="text/css" href="bytech.css"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/></head><body class="slices"><div id="masthead"><p class="logo"><a href="http://www.w3.org/"><img width="72" height="48" alt="W3C" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C"/></a></p><p class="collectiontitle"><a href="./">Techniques for WCAG 2.0</a></p></div><div id="skipnav"><p class="skipnav"><a href="#maincontent">Skip to Content (Press Enter)</a></p></div><a name="top"> </a><div class="div1"><a name="maincontent"/><h1 id="techs">Client-side Scripting Techniques for WCAG 2.0</h1><p>This Web page lists Client-side Scripting Techniques from <a href="Overview.html">Techniques for WCAG 2.0: Techniques and Failures for Web Content Accessibility Guidelines 2.0</a>. Technology-specific techniques do not replace the general techniques: content developers should consider both general techniques and technology-specific techniques as they work toward conformance.</p><p>Publication of techniques for a specific technology does not imply that the technology can be used in all situations to create content that meets WCAG 2.0 success criteria and conformance requirements. Developers need to be aware of the limitations of specific technologies and provide content in a way that is accessible to people with disabilities. </p><p>For information about the techniques, see <a href="intro.html">Introduction to Techniques for WCAG 2.0</a>. For a list of techniques for other technologies, see the <a href="Overview.html#contents">Table of Contents</a>.</p><div id="toc"><h2>Table of Contents</h2>
<ul class="toc"><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/#abstract">Abstract </a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/#status">Status of This Document </a></li><li><a href="#SCR1">SCR1: Allowing the user to extend the default time limit
        </a></li><li><a href="#SCR2">SCR2: Using redundant keyboard and mouse event handlers</a></li><li><a href="#SCR14">SCR14: Using scripts to make nonessential alerts optional</a></li><li><a href="#SCR16">SCR16: Providing a script that warns the user a time limit is about to expire</a></li><li><a href="#SCR18">SCR18: Providing client-side validation and alert</a></li><li><a href="#SCR19">SCR19: Using an onchange event on a select element without causing a change of
                    context</a></li><li><a href="#SCR20">SCR20: Using both keyboard and other device-specific functions</a></li><li><a href="#SCR21">SCR21: Using functions of the Document Object Model (DOM) to add content to a page</a></li><li><a href="#SCR22">SCR22: Using scripts to control blinking and stop it in five seconds or less</a></li><li><a href="#SCR24">SCR24: Using progressive enhancement to open new windows on user request</a></li><li><a href="#SCR26">SCR26: Inserting dynamic content into the Document Object Model immediately following its trigger element</a></li><li><a href="#SCR27">SCR27: Reordering page sections using the Document Object Model</a></li><li><a href="#SCR28">SCR28: Using an expandable and collapsible menu to bypass block of content</a></li><li><a href="#SCR29">SCR29: Adding keyboard-accessible actions to static HTML elements</a></li><li><a href="#SCR30">SCR30: Using scripts to change the link text</a></li><li><a href="#SCR31">SCR31: Using script to change the background color or border of the element with focus</a></li><li><a href="#SCR32">SCR32: Providing client-side validation and adding error text via the DOM</a></li><li><a href="#SCR33">SCR33: Using script to scroll content, and providing a mechanism to pause it</a></li><li><a href="#SCR34">SCR34: Calculating size and position in a way that scales with text size</a></li><li><a href="#SCR35">SCR35: Making actions keyboard accessible by using the onclick event of anchors and buttons</a></li><li><a href="#SCR36">SCR36: Providing a mechanism to allow users to display moving, scrolling, or auto-updating text in a static window or area</a></li><li><a href="#SCR37">SCR37: Creating Custom Dialogs in a Device Independent Way</a></li><li><a href="#SCR38">SCR38: Creating a conforming alternate version for a web page designed with progressive enhancement</a></li></ul><hr/></div><div class="body"><div class="div1">
		<div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR1" id="SCR1"> </a>SCR1: Allowing the user to extend the default time limit
        </h2><div class="applicability"><h3 id="SCR1-applicability">Applicability</h3><div class="textbody"><p>
            Time limits that are controlled by client-side scripting.
</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#time-limits-required-behaviors">
				Success Criterion 2.2.1 (Timing Adjustable)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#time-limits-required-behaviors">
						How to Meet 2.2.1 (Timing Adjustable)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/time-limits-required-behaviors.html">
						Understanding Success Criterion 2.2.1 (Timing Adjustable)
					</a></li></ul><div class="note"><p class="prefix"><em>Note:</em> This technique must be combined with other techniques to meet <a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#time-limits-required-behaviors">SC 2.2.1</a>. See <a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/time-limits-required-behaviors.html"> Understanding SC 2.2.1</a> for details.</p></div></li></ul><h3 id="SCR1-description">Description</h3><div class="textbody"><p>The objective of this technique is to allow user to extend the default time limit by providing a mechanism to extend the time when scripts provide functionality that has default time limits. In order to allow the user to request a longer time limit, the script can provide a form (for example) allowing the user to enter a larger time limit or indicating that more time is needed. If the user is being warned that a time limit is about to expire (see <a href="#SCR16"><em>SCR16: Providing a script that warns the user a time limit is about to expire</em></a>), this form can be made available from the warning dialog. The user can extend the time limit to at least 10 times the default time limit, either by allowing the user to indicate how much additional time is needed or by repeatedly allowing the user to extend the time limit.</p></div><h3 class="small-head" id="SCR1-examples">Examples</h3><ul><li><p>
A Web page contains current stock market statistics and is set to refresh periodically. When the user is warned prior to refreshing the first time, the user is provided with an option to extend the time period between refreshes. 
    </p></li><li><p>
In an online chess game, each player is given a time limit for completing each move. When the player is warned that time is almost up for this move, the user is provided with an option to increase the time.
    </p></li></ul><h3 id="SCR1-resources">Resources</h3><div class="textbody"><p>Resources are for information purposes only, no endorsement implied.</p><ol class="enumar"><li><p> 
                  <a href="http://www.phpbuilder.com/tips/item.php?id=141">PHPBuilder Time-out Info</a> 
               </p></li></ol></div><h3 id="SCR1-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SCR16">SCR16: Providing a script that warns the user a time limit is about to expire</a></li></ul></div><h3 id="SCR1-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR1-procedure">Procedure</h4><ol class="enumar"><li><p>
On a Web page that uses scripts to enforce a time limit, wait until the time limit has expired.
    </p></li><li><p>
Determine if an option was provided to extend the time limit.
    </p></li></ol><h4 class="small-head" id="SCR1-results">Expected Results</h4><ul><li><p>
#2 is true and more time is provided to complete the interaction.
    </p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR2" id="SCR2"> </a>SCR2: Using redundant keyboard and mouse event handlers</h2><div class="applicability"><h3 id="SCR2-applicability">Applicability</h3><div class="textbody"><p>HTML and XHTML with scripting support. </p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#keyboard-operation-keyboard-operable">
				Success Criterion 2.1.1 (Keyboard)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#keyboard-operation-keyboard-operable">
						How to Meet 2.1.1 (Keyboard)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/keyboard-operation-keyboard-operable.html">
						Understanding Success Criterion 2.1.1 (Keyboard)
					</a></li></ul></li><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#keyboard-operation-all-funcs">
				Success Criterion 2.1.3 (Keyboard (No Exception))</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#keyboard-operation-all-funcs">
						How to Meet 2.1.3 (Keyboard (No Exception))
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/keyboard-operation-all-funcs.html">
						Understanding Success Criterion 2.1.3 (Keyboard (No Exception))
					</a></li></ul></li></ul><h3 id="SCR2-description">Description</h3><div class="textbody"><p>The objective of this technique is to demonstrate using device independent events to change a decorative image in response to a mouse or focus event. Use the <code>onmouseover</code> and onmouseout events to change a decorative image when the mouse moves on top of or away from an element on the page. Also, use the <code>onfocus</code> and <code>onblur</code> events to change the image when the element receives and loses focus.</p><p>The example below has a decorative image in front of an anchor element. When the user mouses over the anchor tag, the decorative image in front of the anchor is changed. When the mouse moves off of the anchor, the image is changed back to its original version. The same image change effect occurs when the user gives keyboard focus to the anchor element. When focus is received the image changes, when focus is lost the image is changed back. This is accomplished by attaching <code>onmouseover</code>, <code>onmouseout</code>, <code>onfocus</code> and <code>onblur</code> event handlers to the anchor element. The event handler is a JavaScript function called updateImage(), which changes the src attribute of the image. The updateImage() is called in response to the onmouseover, onmouseout, onfocus, and onblur events.</p><p>Each image is given a unique id. This unique id is passed to updateImage() along with a boolean value indicating which image is to be used: <code>updateImage(imgId, isOver);</code>. The boolean value of true is passed when the mouse is over the anchor element or it has focus. A false value is passed when the mouse moves off of the anchor element or it loses focus. The updateImage() function uses the image id to load the image and then changes the src attribue based on the boolean value. Note that since the image is for decorative purposes, it has a null alt attribute. </p><div class="note"><p class="prefix"><em>Note: </em>It is best to use images that are similar in size and to specify the height and width attributes on the image element. This will prevent any changes to the layout of the page when the image is updated. This example uses images which are identical in size. </p></div></div><h3 class="small-head" id="SCR2-examples">Examples</h3><h4 class="small-head" id="SCR2-ex1">Example 1</h4><div class="example"><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd"&gt;
 &lt;html lang="en"&gt;
 &lt;head&gt;
 &lt;meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"&gt;
 &lt;title&gt;Changing Image Source in a Device Independent Manner&lt;/title&gt;
 &lt;script type="text/javascript"&gt;
 /* This function will change the image src of an image element.
  * param imgId - the id of the image object to change
  * param isOver - true when mouse is over or object has focus,
  *                false when mouse move out or focus is lost
 */
 function updateImage(imgId, isOver) {
   var theImage = document.getElementById(imgId);
   if (theImage != null) { //could use a try/catch block for user agents supporting at least JavaScript 1.4
                           // These browsers support try/catch - NetScape 6, IE 5, Mozilla, Firefox
      if (isOver) {
        theImage.setAttribute("src","yellowplus.gif");
      }
      else {
        theImage.setAttribute("src","greyplus.gif");
      }
   }
 }
 &lt;/script&gt;
 &lt;/head&gt;
 &lt;body&gt;
 &lt;p&gt;Mouse over or tab to the links below and see the image change.&lt;/p&gt;
 &lt;a href="http://www.w3.org/wai" onmouseover="updateImage('wai', true);" onfocus="updateImage('wai', true);"
   onmouseout="updateImage('wai',false);" onblur="updateImage('wai',false);"&gt;
 &lt;img src="greyplus.gif" border="0" alt="" id="wai"&gt;
   W3C Web Accessibility Initiative&lt;/a&gt; &amp;
 &lt;a href="http://www.w3.org/International/" onmouseover="updateImage('i18n', true);" 
   onfocus="updateImage('i18n',true);" onmouseout="updateImage('i18n',false);"
   onblur="updateImage('i18n',false);"&gt;
   &lt;img src="greyplus.gif" border="0" alt="" id="i18n"&gt;
   W3C Internationalization&lt;/a&gt;
 &lt;/body&gt;
 &lt;/html&gt;
</code></pre></div></div><h3 id="SCR2-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR2-procedure">Procedure</h4><p>Load the Web page and test the events using a mouse and via the keyboard. </p><ol class="enumar"><li><p>Check that the "standard" image is displayed as expected when the Web page is loaded. </p></li><li><p>Using the Mouse </p><ol class="enumla"><li><p>Move the mouse over the element containing the event handlers (in this example it is an anchor element). Check that the image changes to the expected image.</p></li><li><p>Move the mouse off of the element. Check that the image changes back to the "standard" image. </p></li></ol></li><li><p>Using the Keyboard </p><ol class="enumla"><li><p>Use the keyboard to set focus to the element containing the event handlers. Check that the image changes to the expected image. </p></li><li><p>Use the keyboard to remove focus from the element (generally by moving focus to another element). Check that the image changes to the "standard" image.</p></li></ol></li><li><p>Verify that the layout of other elements on the page is not affected when the image is changed. </p></li></ol><h4 class="small-head" id="SCR2-results">Expected Results</h4><ul><li><p>All of the steps for the above checks are true. </p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR14" id="SCR14"> </a>SCR14: Using scripts to make nonessential alerts optional</h2><div class="applicability"><h3 id="SCR14-applicability">Applicability</h3><div class="textbody"><p>Scripting technologies which use scripting alerts for non-emergency communication.</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#time-limits-postponed">
				Success Criterion 2.2.4 (Interruptions)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#time-limits-postponed">
						How to Meet 2.2.4 (Interruptions)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/time-limits-postponed.html">
						Understanding Success Criterion 2.2.4 (Interruptions)
					</a></li></ul></li></ul><h3 id="SCR14-description">Description</h3><div class="textbody"><p>The objective of this technique is to display a dialog containing a message (alert) to the user.  When the alert is displayed, it receives focus and the user must activate the OK button on the dialog to dismiss it. Since these alerts cause focus to change they may distract the user, especially when used for non-emergency information. Alerts for non-emergency purposes such as displaying a quote of the day, helpful usage tip, or count down to a particular event, are not presented unless the user enables them through an option provided in the Web page.</p><p>This technique assigns a global JavaScript variable to store the user preference for displaying alerts. The default value is false. A wrapper function is created to check the value of this variable before displaying an alert. All calls to display an alert are made to this wrapper function rather than calling the alert() function directly. Early in the page, a button is provided for the user to enable the display of alerts on the page. This technique works on a visit by visit basis.     Each time the page is loaded, alerts will be disabled and the user must manually enable them. Alternatively, the author could use cookies to store user preferences across sessions.</p></div><h3 class="small-head" id="SCR14-examples">Examples</h3><h4 class="small-head" id="SCR14-ex1">Example 1</h4><div class="example"><div class="textbody"><p>The script below will display a quote in an alert box every ten seconds, if the user selects the "Turn Alerts On" button. The user can turn the quotes off again by choosing "Turn Alerts Off".</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;script type="text/javascript"&gt;
var bDoAlerts = false;  // global variable which specifies whether to 
                                       // display alerts or not
/* function to enable/disable alerts.
 * param boolean bOn - true to enable alerts, false to disable them.
*/
function modifyAlerts(isEnabled) {
   bDoAlerts = isEnabled;
}
/* wrapper function for displaying alerts.  Checks the value of bDoAlerts
*and only calls the alert() function when bDoAlerts is true.
*/
function doAlert(aMessage) {
    if (bDoAlerts) {
       alert(aMessage);
    }
}
// example usage - a loop to display famous quotes.
var gCounter = -1;  // global to store counter
// quotes variable would be initialized with famous quotations
var quotes = new Array("quote 1", "quote 2", "quote 3", "quote 4", "quote 5");
function showQuotes() {
   if (++gCounter &amp;gt;= quotes.length) {
     gCounter = 0;
   }
   doAlert(quotes[gCounter]);
   setTimeout("showQuotes();", 10000);
}
showQuotes();
&lt;/script&gt;
</code></pre></div><div class="textbody"><p>Within the body of the page, include a way to turn the alerts on and off. Below is one example:</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;body&gt;
&lt;p&gt;Press the button below to enable the display of famous quotes 
using an alert box&lt;br /&gt;
&lt;button id="enableBtn" type="button" onclick="modifyAlerts(true);"&gt;
Turn Alerts On&lt;/button&gt;&lt;br /&gt;
&lt;button id="disableBtn" type="button" onclick="modifyAlerts(false);"&gt;
Turn Alerts Off&lt;/button&gt;&lt;/p&gt;
</code></pre></div><div class="textbody"><p>Working example of this code: <a href="/WAI/WCAG20/Techniques/working-examples/SCR14/enablealerts.html" class="ex-ref">Demonstration of Alerts</a>.</p></div></div><h3 id="SCR14-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR14-procedure">Procedure</h4><p>For a Web page that supports non-emergency interruptions using a JavaScript alert:</p><ol class="enumar"><li><p>Load the Web page and verify that no non-emergency alerts are displayed.</p></li><li><p>Verify there is a mechanism to activate the non-emergency alerts.</p></li><li><p>Activate the non-emergency alerts and verify that the alerts are displayed.</p></li></ol><h4 class="small-head" id="SCR14-results">Expected Results</h4><ul><li><p>For a Web page that supports non-emergency interruptions using a JavaScript alert, checks 1, 2, and 3 above are true.</p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR16" id="SCR16"> </a>SCR16: Providing a script that warns the user a time limit is about to expire</h2><div class="applicability"><h3 id="SCR16-applicability">Applicability</h3><div class="textbody"><p>
Time limits exist that are controlled by script.
</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#time-limits-required-behaviors">
				Success Criterion 2.2.1 (Timing Adjustable)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#time-limits-required-behaviors">
						How to Meet 2.2.1 (Timing Adjustable)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/time-limits-required-behaviors.html">
						Understanding Success Criterion 2.2.1 (Timing Adjustable)
					</a></li></ul><div class="note"><p class="prefix"><em>Note:</em> This technique must be combined with other techniques to meet <a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#time-limits-required-behaviors">SC 2.2.1</a>. See <a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/time-limits-required-behaviors.html"> Understanding SC 2.2.1</a> for details.</p></div></li></ul><h3 id="SCR16-description">Description</h3><div class="textbody"><p>
The objective of this technique is to notify users that they are almost out of time to complete an interaction. When scripts provide functionality that has time limits, the script can include functionality to warn the user of imminent time limits and provide a mechanism to request more time. 20 seconds or more before the time limit occurs, the script provides a confirm dialog that states that a time limit is imminent and asks if the user needs more time. If the user answers "yes" then the time limit is reset. If the user answers "no" or does not respond, the time limit is allowed to expire.
</p><p>
This technique involves time limits set with the <code>window.setTimeout()</code> method. If, for example, the time limit is set to expire in 60 seconds, you can set the time limit for 40 seconds and provide the confirm dialog. When the confirm dialog appears, a new time limit is set for the remaining 20 seconds. Upon expiry of the "grace period time limit" the action that would have been taken at the expiry of the 60 second time limit in the original design is taken.
</p></div><h3 class="small-head" id="SCR16-examples">Examples</h3><h4 class="small-head" id="SCR16-ex1">Example 1</h4><div class="example"><div class="textbody"><p>
A page of stock market quotes uses script to refresh the page every five minutes in order to ensure the latest statistics remain available. 20 seconds before the five minute period expires, a confirm dialog appears asking if the user needs more time before the page refreshes. This allows the user to be aware of the impending refresh and to avoid it if desired.
</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
&lt;title&gt;Stock Market Quotes&lt;/title&gt;
&lt;script type="text/javascript"&gt;
&lt;!--
function timeControl() {
	// set timer for 4 min 40 sec, then ask user to confirm.
	setTimeout('userCheck()', 280000);
}
function userCheck() {
	// set page refresh for 20 sec
	var id=setTimeout('pageReload()', 20000);
	// If user selects "OK" the timer is reset 
	// else the page will refresh from the server.
	if (confirm("This page is set to refresh in 20 seconds. 
	Would you like more time?"))
	{
	clearTimeout(id);
	timeControl();
	}
}
function pageReload() {
	window.location.reload(true);
}
timeControl();
--&gt;
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Stock Market Quotes&lt;/h1&gt;
...etc...
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div></div><h3 id="SCR16-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SCR1">SCR1: Allowing the user to extend the default time limit
        </a></li></ul></div><h3 id="SCR16-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR16-procedure">Procedure</h4><p>
On a Web page that has a time limit controlled by a script: </p><ol class="enumar"><li><p>
load the page and start a timer that is 20 seconds less than the time limit.
    </p></li><li><p>
when the timer expires, check that a confirmation dialog is displayed warning of the impending time limit.
    </p></li></ol><h4 class="small-head" id="SCR16-results">Expected Results</h4><ul><li><p>
#2 is true.
    </p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR18" id="SCR18"> </a>SCR18: Providing client-side validation and alert</h2><div class="applicability"><h3 id="SCR18-applicability">Applicability</h3><div class="textbody"><p>Content that validates user input.</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#minimize-error-identified">
				Success Criterion 3.3.1 (Error Identification)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#minimize-error-identified">
						How to Meet 3.3.1 (Error Identification)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/minimize-error-identified.html">
						Understanding Success Criterion 3.3.1 (Error Identification)
					</a></li></ul></li><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#minimize-error-suggestions">
				Success Criterion 3.3.3 (Error Suggestion)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#minimize-error-suggestions">
						How to Meet 3.3.3 (Error Suggestion)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/minimize-error-suggestions.html">
						Understanding Success Criterion 3.3.3 (Error Suggestion)
					</a></li></ul></li><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#minimize-error-reversible">
				Success Criterion 3.3.4 (Error Prevention (Legal, Financial, Data))</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#minimize-error-reversible">
						How to Meet 3.3.4 (Error Prevention (Legal, Financial, Data))
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/minimize-error-reversible.html">
						Understanding Success Criterion 3.3.4 (Error Prevention (Legal, Financial, Data))
					</a></li></ul></li></ul><h3 id="SCR18-description">Description</h3><div class="textbody"><p>The objective of this technique is to validate user input as values are entered for each field, by means of client-side scripting. If errors are found, an alert dialog describes the nature of the error in text. Once the user dismisses the alert dialog, it is helpful if the script positions the keyboard focus on the field where the error occurred.</p></div><h3 class="small-head" id="SCR18-examples">Examples</h3><h4 class="small-head" id="SCR18-ex1">Example 1: Checking a single control with an event handler</h4><div class="example"><div class="textbody"><p>The following script will check that a valid date has been entered in the form control.</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;label for="date"&gt;Date:&lt;/label&gt;
&lt;input type="text" name="date" id="date" 
onchange="if(isNaN(Date.parse(this.value))) 
alert('This control is not a valid date. 
Please re-enter the value.');" /&gt;
</code></pre></div></div><h4 class="small-head" id="SCR18-ex2">Example 2: Checking multiple controls when the user submits the form</h4><div class="example"><div class="textbody"><p>The following sample shows multiple controls in a form. The <code>form</code> element uses the <code>onsubmit</code> attribute which creates an event handler to execute the validation script when the user attempts to submit the form. If the validation is successful, the event returns <code>true</code> and the form submission proceeds; if the validation finds errors, it displays an error message and returns <code>false</code> to cancel the submit attempt so the user can fix the problems.</p><div class="note"><p class="prefix"><em>Note 1:
					</em>This example demonstrates an alert for simplicity. A more helpful notification to the user would be to highlight the controls with problems and add information to the page about the nature of the errors and how to navigate to the controls that require data fixes.</p><p class="prefix"><em>Note 2:
					</em>Although this example uses an <code>onsubmit</code> attribute on the <code>form</code> element for brevity, normal practice is to create a submit event listener when the page is loaded.</p></div><p>Script code:</p><div class="code"><pre><code>
function validate() {
	// initialize error message
	var msg = "";
	
	//validate name
	var pattern = /^[a-zA-Z\s]+$/;
	var el = document.getElementById("name");
	if (!pattern.test(el.value))  msg += "Name can only have letters and spaces. ";
	
	// validate number
	var pattern = /^[\d\-+\.\s]+$/;
	var el = document.getElementById("tel");
	if (!pattern.test(el.value))  msg += "Telephone number can only have digits and separators. ";
	
	if (msg != "") {
		alert(msg);
		return false;
	} else return true;
}
</code></pre></div><p>Form code:</p><div class="code"><pre><code>
&lt;form action="multiple-controls.html" onsubmit="return validate()"&gt;
	&lt;p&gt;
		&lt;label for="name"&gt;Name: &lt;/label&gt;
		&lt;input type="text" name="name" id="name" /&gt;
	&lt;/p&gt;
	&lt;p&gt;
		&lt;label for="tel"&gt;Telephone number: &lt;/label&gt;
		&lt;input type="text" name="tel" id="tel" /&gt;				
	&lt;/p&gt;
	&lt;p&gt;
		&lt;input type="submit" /&gt;
	&lt;/p&gt;
&lt;/form&gt;
</code></pre></div><p>This is demonstrated in the <a href="/WAI/WCAG20/Techniques/working-examples/SCR18/multiple-controls.html" class="ex-ref">working example of checking multiple controls when the user submits the form</a>.</p></div></div><h3 id="SCR18-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G89">G89: Providing expected data format and example</a></li></ul></div><h3 id="SCR18-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR18-procedure">Procedure</h4><p>For form fields that require specific input:</p><ol class="enumar"><li><p>enter invalid data</p></li><li><p>determine if an alert describing the error is provided.</p></li></ol><h4 class="small-head" id="SCR18-results">Expected Results</h4><ul><li><p>#2 is true</p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR19" id="SCR19"> </a>SCR19: Using an onchange event on a select element without causing a change of
                    context</h2><div class="applicability"><h3 id="SCR19-applicability">Applicability</h3><div class="textbody"><p> HTML and XHTML with support for scripting. This technique uses the try/catch
                        construct of JavaScript 1.4. </p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#consistent-behavior-unpredictable-change">
				Success Criterion 3.2.2 (On Input)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#consistent-behavior-unpredictable-change">
						How to Meet 3.2.2 (On Input)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/consistent-behavior-unpredictable-change.html">
						Understanding Success Criterion 3.2.2 (On Input)
					</a></li></ul></li><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#consistent-behavior-no-extreme-changes-context">
				Success Criterion 3.2.5 (Change on Request)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#consistent-behavior-no-extreme-changes-context">
						How to Meet 3.2.5 (Change on Request)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/consistent-behavior-no-extreme-changes-context.html">
						Understanding Success Criterion 3.2.5 (Change on Request)
					</a></li></ul></li></ul><div class="ua-issues"><h3 class="small-head" id="ua1.6.1"> User Agent and Assistive Technology Support Notes</h3><p>See <a href="/WAI/WCAG20/Techniques/ua-notes/client-side-script#SCR19">User Agent Support Notes for SCR19</a>.</p></div><h3 id="SCR19-description">Description</h3><div class="textbody"><p> The objective of this technique is to demonstrate how to correctly use an
                        onchange event with a select element to update other elements on the Web page. This technique will not cause a change of context. When there are one
                        or more select elements on the Web page, an onchange event on one, can
                        update the options in another select element on the Web page. All of the
                        data required by the select elements is included within the Web page. </p><p> It is important to note that the select item which is modified is after the
                        trigger select element in the reading order of the Web page. This ensures
                        that assistive technologies will pick up the change and users will encounter
                        the new data when the modified element receives focus. This technique relies
                        on JavaScript support in the user agent. </p></div><h3 class="small-head" id="SCR19-examples">Examples</h3><h4 class="small-head" id="SCR19-ex1">Example 1</h4><div class="example"><div class="textbody"><p> This example contains two select elements. When an item is selected
                                in the first select, the choices in the other select are updated
                                appropriately. The first select element contains a list of
                                continents. The second select element will contain a partial list of
                                countries located in the selected continent. There is an onchange
                                event associated with the continent select. When the continent
                                selection changes, the items in the country select are modified
                                using JavaScript via the Document Object Model (DOM). All of the
                                data required, the list of countries and continents, is included
                                within the Web page. </p><p>Overview of the code below</p><ul><li><p> countryLists array variable which contains the list of
                                        countries for each continent in the trigger select element.
                                    </p></li><li><p> countryChange() function which is called by the onchange
                                        event of the continent select element. </p></li><li><p> The XHTML code to create the select elements in the body of
                                        the Web page. </p></li></ul></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;?xml version="1.0" encoding="UTF-8"?&gt; 
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt; 
&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"&gt; 
  &lt;head&gt; 
    &lt;meta http-equiv="content-type" content="text/xhtml; charset=utf-8" /&gt; 
    &lt;title&gt;Dynamic Select Statements&lt;/title&gt; 
&lt;script type="text/javascript"&gt;
 //&lt;![CDATA[ 
 // array of possible countries in the same order as they appear in the country selection list 
 var countryLists = new Array(4) 
 countryLists["empty"] = ["Select a Country"]; 
 countryLists["North America"] = ["Canada", "United States", "Mexico"]; 
 countryLists["South America"] = ["Brazil", "Argentina", "Chile", "Ecuador"]; 
 countryLists["Asia"] = ["Russia", "China", "Japan"]; 
 countryLists["Europe"]= ["Britain", "France", "Spain", "Germany"]; 
 /* CountryChange() is called from the onchange event of a select element. 
 * param selectObj - the select object which fired the on change event. 
 */ 
 function countryChange(selectObj) { 
 // get the index of the selected option 
 var idx = selectObj.selectedIndex; 
 // get the value of the selected option 
 var which = selectObj.options[idx].value; 
 // use the selected option value to retrieve the list of items from the countryLists array 
 cList = countryLists[which]; 
 // get the country select element via its known id 
 var cSelect = document.getElementById("country"); 
 // remove the current options from the country select 
 var len=cSelect.options.length; 
 while (cSelect.options.length &gt; 0) { 
 cSelect.remove(0); 
 } 
 var newOption; 
 // create new options 
 for (var i=0; i&lt;cList.length; i++) { 
 newOption = document.createElement("option"); 
 newOption.value = cList[i];  // assumes option string and value are the same 
 newOption.text=cList[i]; 
 // add the new option 
 try { 
 cSelect.add(newOption);  // this will fail in DOM browsers but is needed for IE 
 } 
 catch (e) { 
 cSelect.appendChild(newOption); 
 } 
 } 
 } 
//]]&gt;
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;noscript&gt;This page requires JavaScript be available and enabled to function properly&lt;/noscript&gt;
  &lt;h1&gt;Dynamic Select Statements&lt;/h1&gt;
  &lt;label for="continent"&gt;Select Continent&lt;/label&gt;
  &lt;select id="continent" onchange="countryChange(this);"&gt;
    &lt;option value="empty"&gt;Select a Continent&lt;/option&gt;
    &lt;option value="North America"&gt;North America&lt;/option&gt;
    &lt;option value="South America"&gt;South America&lt;/option&gt;
    &lt;option value="Asia"&gt;Asia&lt;/option&gt;
    &lt;option value="Europe"&gt;Europe&lt;/option&gt;
  &lt;/select&gt;
  &lt;br/&gt;
  &lt;label for="country"&gt;Select a country&lt;/label&gt;
  &lt;select id="country"&gt;
    &lt;option value="0"&gt;Select a country&lt;/option&gt;
  &lt;/select&gt;
&lt;/body&gt;
 &lt;/html&gt;</code></pre></div><div class="textbody"><p> Here is a working example: <a href="/WAI/WCAG20/Techniques/working-examples/SCR19/dynselect.html" class="ex-ref">Dynamic
                                    Select</a> 
            </p></div></div><h3 id="SCR19-resources">Resources</h3><div class="textbody"><p>Resources are for information purposes only, no endorsement implied.</p><ul><li><p>
                  <a href="http://usability.com.au/2008/09/accessible-forms-using-wcag-2-0/">Accessible Forms using WCAG 2.0</a>
               </p></li><li><p>
                  <a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#context-changedef">Change of context definition</a>
               </p></li></ul></div><h3 id="SCR19-related-techs">Related Techniques</h3><div class="textbody"><p>(none currently listed)</p></div><h3 id="SCR19-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR19-procedure">Procedure</h4><ol class="enumar"><li><p> Navigate to the trigger select element (in this example, the one
                                    to select continents) and change the value of the select. </p></li><li><p> Navigate to the select element that is updated by the trigger
                                    (in this example, the one to select countries). </p></li><li><p> Check that the matching option values are displayed in the other
                                    select element. </p></li><li><p> Navigate to the trigger select element, navigate through the
                                    options but do not change the value. </p></li><li><p> Check that the matching option values are still displayed in the
                                    associated element. </p></li></ol><p>It is recommended that the select elements are tested with an assistive
                            technology to verify that the changes to the associated element are
                            recognized. </p><h4 class="small-head" id="SCR19-results">Expected Results</h4><ul><li><p> Step #3 and #5 are true. </p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR20" id="SCR20"> </a>SCR20: Using both keyboard and other device-specific functions</h2><div class="applicability"><h3 id="SCR20-applicability">Applicability</h3><div class="textbody"><p>Applies to all content that uses Script to implement functionality.</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#keyboard-operation-keyboard-operable">
				Success Criterion 2.1.1 (Keyboard)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#keyboard-operation-keyboard-operable">
						How to Meet 2.1.1 (Keyboard)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/keyboard-operation-keyboard-operable.html">
						Understanding Success Criterion 2.1.1 (Keyboard)
					</a></li></ul></li><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#keyboard-operation-all-funcs">
				Success Criterion 2.1.3 (Keyboard (No Exception))</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#keyboard-operation-all-funcs">
						How to Meet 2.1.3 (Keyboard (No Exception))
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/keyboard-operation-all-funcs.html">
						Understanding Success Criterion 2.1.3 (Keyboard (No Exception))
					</a></li></ul></li></ul><h3 id="SCR20-description">Description</h3><div class="textbody"><p>
                        The objective of this technique is to illustrate the use of both keyboard-specific and mouse-specific events with code that has a scripting function associated with an event. Using both keyboard-specific and mouse-specific events together ensures that content can be operated by a wide range of devices. For example, a script may perform the same action when a keypress is detected that is performed when a mouse button is clicked. This technique goes beyond the Success Criterion requirement for keyboard access by including not only keyboard access but access using other devices as well. 
                    </p><p>
            In JavaScript, commonly used event handlers include, onblur, onchange, onclick, ondblclick, onfocus, onkeydown, onkeypress, onkeyup, onload, onmousedown, onmousemove, onmouseout, onmouseover, onmouseup, onreset, onselect, onsubmit, onunload. Some mouse-specific functions have a logical corresponding keyboard-specific function (such as 'onmouseover' and 'onfocus'). A keyboard event handler should be provided that executes the same function as the mouse event handler.
                    </p><p>
                        The following table suggests keyboard event handlers to pair mouse event handlers.
                    </p><a name="SCR20_mappings" id="SCR20_mappings"> </a><table border="1" cellspacing="0"><caption>Device Handler Correspondences</caption><tbody><tr><th scope="col">Use...</th><th scope="col">...with</th></tr><tr><td> 
                  <code>mousedown</code> 
               </td><td> 
                  <code>keydown</code>
								       </td></tr><tr><td> 
                  <code>mouseup</code> 
               </td><td> 
                  <code>keyup</code>
								       </td></tr><tr><td> 
                  <code>click 
								</code> 
                  <sup>[1]</sup> 
               </td><td> 
                  <code>keypress 
								</code> 
                  <sup>[2]</sup> 
               </td></tr><tr><td> 
                  <code>mouseover</code> 
               </td><td> 
                  <code>focus</code>
								       </td></tr><tr><td> 
                  <code>mouseout</code> 
               </td><td> 
                  <code>blur</code> 
               </td></tr></tbody></table><p>
						   <sup>1</sup> Although <code>click</code> is in principle a mouse event handler, most HTML and XHTML user agents also process this event when a native HTML control (e.g. a button or a link) is activated, regardless of whether it was activated with the mouse or the keyboard. In practice, therefore, it is not necessary to duplicate this event when adding handlers to natively focusable HTML elements. However, it is necessary when adding handlers to other events, such as in Example 2 below.</p><p>
						   <sup>2</sup> Since the <code>keypress</code> event handler reacts to any key, the event handler function should check first to ensure the Enter key was pressed before proceeding to handle the event. Otherwise, the event handler will run each time the user presses any key, even the tab key to leave the control, and this is usually not desirable.
                    </p><p>
                    Some mouse-specific functions (such as <code>dblclick</code> and <code>mousemove</code>) do  not have a corresponding keyboard-specific function. This means that some functions may need  to be implemented differently for each device (for example, including a series of buttons to execute, via keyboard, the equivalent mouse-specific functions implemented).</p></div><h3 class="small-head" id="SCR20-examples">Examples</h3><h4 class="small-head" id="SCR20-ex1">Example 1</h4><div class="example"><div class="textbody"><p>In this example of an image link, the image is changed when the user positions the pointer over the image. To provide keyboard users with a similar experience, the image is also changed when the user tabs to it.
                            </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;a href="menu.php" onmouseover="swapImageOn('menu')" onfocus="swapImageOn('menu')" 
onmouseout="swapImageOff('menu')" onblur="swapImageOff('menu')"&gt; 
&lt;img id="menu" src="menu_off.gif" alt="Menu" /&gt; 
&lt;/a&gt;</code></pre></div></div><h4 class="small-head" id="SCR20-ex2">Example 2</h4><div class="example"><div class="textbody"><p>
								This example shows a custom image control for which both the mouse and the keyboard can be used to activate the function. The mouse event <code>onclick</code> is duplicated by an appropriate keyboard event <code>onkeypress</code>. The <code>tabindex</code> attribute ensures that the keyboard will have a tab stop on the image. Note that in this example, the <code>nextPage()</code> function should check that the keyboard key pressed was Enter, otherwise it will respond to all keyboard actions while the image has focus, which is not the desired behavior.</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;img onclick="nextPage();" onkeypress="nextPage();" tabindex="0" src="arrow.gif" 
alt="Go to next page"&gt; </code></pre></div><div class="textbody"><div class="note"><p class="prefix"><em>Note: </em>This example uses tabindex on an <code>img</code> element. Even though this is currently invalid, it is provided as a transitional technique to make this function work. Custom controls like this should also use WAI-ARIA to expose the role and state of the control.</p></div></div></div><h3 id="SCR20-resources">Resources</h3><div class="textbody"><p>Resources are for information purposes only, no endorsement implied.</p><ul><li><p> 
                  <a href="http://webaim.org/techniques/javascript/">Overview of Creating Accessible JavaScript</a> 
               </p></li></ul></div><h3 id="SCR20-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G90">G90: Providing keyboard-triggered event handlers</a></li></ul></div><h3 id="SCR20-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR20-procedure">Procedure</h4><ol class="enumar"><li><p>
                                Find all interactive functionality
                            </p></li><li><p>
                                Check that all interactive functionality can be accessed using the keyboard alone
                            </p></li></ol><h4 class="small-head" id="SCR20-results">Expected Results</h4><ul><li><p>
                                #2 is true
                            </p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR21" id="SCR21"> </a>SCR21: Using functions of the Document Object Model (DOM) to add content to a page</h2><div class="applicability"><h3 id="SCR21-applicability">Applicability</h3><div class="textbody"><p>ECMAScript used inside HTML and XHTML</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#content-structure-separation-programmatic">
				Success Criterion 1.3.1 (Info and Relationships)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#content-structure-separation-programmatic">
						How to Meet 1.3.1 (Info and Relationships)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/content-structure-separation-programmatic.html">
						Understanding Success Criterion 1.3.1 (Info and Relationships)
					</a></li></ul></li></ul><div class="ua-issues"><h3 class="small-head" id="ua1.8.1"> User Agent and Assistive Technology Support Notes</h3><p>See <a href="/WAI/WCAG20/Techniques/ua-notes/client-side-script#SCR21">User Agent Support Notes for SCR21</a>.</p></div><h3 id="SCR21-description">Description</h3><div class="textbody"><p>The objective of this technique is to demonstrate how to use functions of the Document Object Model (DOM) to add content to a page instead of using <code>document.write</code> or <code>object.innerHTML</code>. The <code>document.write()</code> method does not work with XHTML when served with the correct MIME type (application/xhtml+xml), and the <code>innerHTML</code> property is not part of the DOM specification and thus should be avoided.  If the DOM functions are used to add the content, user agents can access the DOM to retrieve the content. The <code>createElement()</code> function can be used to create elements within the DOM.  The <code>createTextNode()</code> is used to create text associated with elements.  The <code>appendChild()</code>, <code>removeChild()</code>, <code>insertBefore()</code> and <code>replaceChild()</code> functions are used to add and remove elements and nodes. Other DOM functions are used to assign attributes to the created elements.</p><div class="note"><p class="prefix"><em>Note: </em>When adding focusable elements into the document, do not add <code>tabindex</code> attributes to explicitly set the tab order as this can cause problems when adding focusable elements into the middle of a document. Let the default tab order be assigned to the new element by not explicitly setting a <code>tabindex</code> attribute.</p></div></div><h3 class="small-head" id="SCR21-examples">Examples</h3><h4 class="small-head" id="SCR21-ex1">Example 1</h4><div class="example"><div class="textbody"><p>This example demonstrates use of client-side scripting to validate a form. If errors are found appropriate error messages are displayed.  The example uses the DOM functions to add error notification consisting of a title, a short paragraph explaining that an error has occurred, and a list of errors in an ordered list. The content of the title is written as a link so that it can be used to draw the user's attention to the error using the focus method. Each item in the list is also written as a link that places the focus onto the form field in error when the link is followed.</p><p>For simplicity, the example just validates two text fields, but can easily be extended to become a generic form handler. Client-side validation should not be the sole means of validation , and should be backed up with server-side validation. The benefit of client-side validation is that you can provide immediate feedback to the user to save them waiting for the errors to come back from the server, and it helps reduce unnecessary traffic to the server.</p><p>Here is the script that adds the event handlers to the form. If scripting is enabled, the validateNumbers() function will be called to perform client-side validation before the form is submitted to the server. If scripting is not enabled, the form will be immediately submitted to the server, so validation should also be implemented on the server. 
              </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
window.onload = initialise;
function initialise()
{
  // Ensure we're working with a relatively standards compliant user agent
  if (!document.getElementById || !document.createElement || !document.createTextNode)
    return;

  // Add an event handler for the number form
  var objForm = document.getElementById('numberform');
  objForm.onsubmit= function(){return validateNumbers(this);};
}
</code></pre></div><div class="textbody"><p>Here is the validation function.  Note the use of the createElement(), createTextNode(), and appendChild() DOM functions to create the error message elements.</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
function validateNumbers(objForm)
{
  // Test whether fields are valid
  var bFirst = isNumber(document.getElementById('num1').value);
  var bSecond = isNumber(document.getElementById('num2').value);
  // If not valid, display errors
  if (!bFirst || !bSecond)
  {
    var objExisting = document.getElementById('validationerrors');
    var objNew = document.createElement('div');
    var objTitle = document.createElement('h2');
    var objParagraph = document.createElement('p');
    var objList = document.createElement('ol');
    var objAnchor = document.createElement('a');
    var strID = 'firsterror';
    var strError;
    // The heading element will contain a link so that screen readers
    // can use it to place focus - the destination for the link is 
    // the first error contained in a list
    objAnchor.appendChild(document.createTextNode('Errors in Submission'));
    objAnchor.setAttribute('href', '#firsterror');
    objTitle.appendChild(objAnchor);
    objParagraph.appendChild(document.createTextNode('Please review the following'));
    objNew.setAttribute('id', 'validationerrors');
    objNew.appendChild(objTitle);
    objNew.appendChild(objParagraph);
    // Add each error found to the list of errors
    if (!bFirst)
    {
      strError = 'Please provide a numeric value for the first number';
      objList.appendChild(addError(strError, '#num1', objForm, strID));
      strID = '';
    }
    if (!bSecond)
    {
      strError = 'Please provide a numeric value for the second number';
      objList.appendChild(addError(strError, '#num2', objForm, strID));
      strID = '';
    }
    // Add the list to the error information
    objNew.appendChild(objList);
    // If there were existing errors, replace them with the new lot,
    // otherwise add the new errors to the start of the form
    if (objExisting)
      objExisting.parentNode.replaceChild(objNew, objExisting);
    else
    {
      var objPosition = objForm.firstChild;
      objForm.insertBefore(objNew, objPosition);
    }
    // Place focus on the anchor in the heading to alert
    // screen readers that the submission is in error
    objAnchor.focus();
    // Do not submit the form
    objForm.submitAllowed = false;
    return false;
  }
  return true;
}

// Function to validate a number
function isNumber(strValue)
{
  return (!isNaN(strValue) &amp;&amp; strValue.replace(/^\s+|\s+$/, '') !== '');
} 
</code></pre></div><div class="textbody"><p>Below are the helper functions to create the error message and to set focus to the associated form field.</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
// Function to create a list item containing a link describing the error
// that points to the appropriate form field
function addError(strError, strFragment, objForm, strID)
{
  var objAnchor = document.createElement('a');
  var objListItem = document.createElement('li');
  objAnchor.appendChild(document.createTextNode(strError));
  objAnchor.setAttribute('href', strFragment);
  objAnchor.onclick = function(event){return focusFormField(this, event, objForm);};
  objAnchor.onkeypress = function(event){return focusFormField(this, event, objForm);};
  // If strID has a value, this is the first error in the list
  if (strID.length &gt; 0)
    objAnchor.setAttribute('id', strID);
  objListItem.appendChild(objAnchor);
  return objListItem;
}

// Function to place focus to the form field in error
function focusFormField(objAnchor, objEvent, objForm)
{
  // Allow keyboard navigation over links
  if (objEvent &amp;&amp; objEvent.type == 'keypress')
    if (objEvent.keyCode != 13 &amp;&amp; objEvent.keyCode != 32)
      return true;
  // set focus to the form control
  var strFormField = objAnchor.href.match(/[^#]\w*$/);
  objForm[strFormField].focus();
  return false;
}</code></pre></div><div class="textbody"><p>Here is the HTML for the example form.</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;title&gt;ECMAScript Form Validation&lt;/title&gt;
	&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;
	&lt;script type="text/javascript" src="validate.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Form Validation&lt;/h1&gt;
&lt;form id="numberform" method="post" action="form.php"&gt;
&lt;fieldset&gt;
&lt;legend&gt;Numeric Fields&lt;/legend&gt;
&lt;p&gt;
&lt;label for="num1"&gt;Enter first number&lt;/label&gt;
&lt;input type="text" size="20" name="num1" id="num1"&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;label for="num2"&gt;Enter second number&lt;/label&gt;
&lt;input type="text" size="20" name="num2" id="num2"&gt;
&lt;/p&gt;
&lt;/fieldset&gt;
&lt;p&gt;
&lt;input type="submit" name="submit" value="Submit Form"&gt;
&lt;/p&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div><div class="textbody"><p>This example is limited to client-side scripting, and should be backed up with server-side validation. The example is limited to the creation of error messages when client-side scripting is available. 
              </p><p>Here is a link to a working example: <a href="/WAI/WCAG20/Techniques/working-examples/SCR21/ex1.html" class="ex-ref">Form Validation</a> 
            </p></div></div><h3 id="SCR21-resources">Resources</h3><div class="textbody"><p>Resources are for information purposes only, no endorsement implied.</p><ul><li><p>HTML 4.01  <a href="http://www.webreference.com/js/column44/index.html">The Document Object Model, More methods</a> from Webreference.com
									</p></li><li><p>
                  <a href="http://usability.com.au/2008/09/accessible-forms-using-wcag-2-0/">Accessible Forms using WCAG 2.0</a>
               </p></li></ul></div><h3 id="SCR21-related-techs">Related Techniques</h3><div class="textbody"><p>(none currently listed)</p></div><h3 id="SCR21-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR21-procedure">Procedure</h4><p>For pages that dynamically create new content:</p><ol class="enumar"><li><p>Examine the source code and check that the new content is not created using document.write(), innerHTML, outerHTML, innerText or outerText.</p></li></ol><h4 class="small-head" id="SCR21-results">Expected Results</h4><ul><li><p>Check #1 is true.</p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR22" id="SCR22"> </a>SCR22: Using scripts to control blinking and stop it in five seconds or less</h2><div class="applicability"><h3 id="SCR22-applicability">Applicability</h3><div class="textbody"><p>Technologies that support script-controlled blinking of content.</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#time-limits-pause">
				Success Criterion 2.2.2 (Pause, Stop, Hide)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#time-limits-pause">
						How to Meet 2.2.2 (Pause, Stop, Hide)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/time-limits-pause.html">
						Understanding Success Criterion 2.2.2 (Pause, Stop, Hide)
					</a></li></ul></li></ul><h3 id="SCR22-description">Description</h3><div class="textbody"><p>The objective of this technique is to control blinking with script so it can be set to stop in less than five seconds by the script. Script is used to start the blinking effect of content, control the toggle between visible and hidden states, and also stop the effect at five seconds or less. The <code>setTimeout()</code> function can be used to toggle blinking content between visible and hidden states, and stop when the number of iterations by the time between them adds up to nearly five seconds.</p></div><h3 class="small-head" id="SCR22-examples">Examples</h3><h4 class="small-head" id="SCR22-ex1">Example 1</h4><div class="example"><div class="textbody"><p>This example uses JavaScript to control blinking of some HTML and XHTML content. JavaScript creates the blinking effect by changing the visibility status of the content. It controls the start of the effect and stops it within five seconds.</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
...
&lt;div id="blink1" class="highlight"&gt;New item!&lt;/div&gt;
&lt;script type="text/javascript"&gt;
&lt;!--
// blink "on" state
function show()
{
	if (document.getElementById)
	document.getElementById("blink1").style.visibility = "visible";
}
// blink "off" state
function hide()
{
	if (document.getElementById)
	document.getElementById("blink1").style.visibility = "hidden";
}
// toggle "on" and "off" states every 450 ms to achieve a blink effect
// end after 4500 ms (less than five seconds)
for(var i=900; i &lt; 4500; i=i+900)
{
	setTimeout("hide()",i);
	setTimeout("show()",i+450);
}
--&gt;
&lt;/script&gt;
...
            </code></pre></div><div class="textbody"><p>Working example of this code: <a href="/WAI/WCAG20/Techniques/working-examples/SCR22/ex1.html" class="ex-ref">Using script to control blinking</a>.</p></div></div><h3 id="SCR22-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR22-procedure">Procedure</h4><p>For each instance of blinking content:</p><ol class="enumar"><li><p>Start a timer for 5 seconds at the start of the blink effect.</p></li><li><p>When the timer expires, determine if the blinking has stopped.</p></li></ol><h4 class="small-head" id="SCR22-results">Expected Results</h4><ul><li><p>For each instance of blinking content, #2 is true.</p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR24" id="SCR24"> </a>SCR24: Using progressive enhancement to open new windows on user request</h2><div class="applicability"><h3 id="SCR24-applicability">Applicability</h3><div class="textbody"><p> HTML 4.01 and XHTML 1.0 </p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#consistent-behavior-no-extreme-changes-context">
				Success Criterion 3.2.5 (Change on Request)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#consistent-behavior-no-extreme-changes-context">
						How to Meet 3.2.5 (Change on Request)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/consistent-behavior-no-extreme-changes-context.html">
						Understanding Success Criterion 3.2.5 (Change on Request)
					</a></li></ul></li></ul><h3 id="SCR24-description">Description</h3><div class="textbody"><p> The objective of this technique is to avoid confusion that may be caused by
                        the appearance of new windows that were not requested by the user. Suddenly
                        opening new windows can disorient or be missed completely by some users.
                        If the document type does not allow the <code>target</code> attribute (it
                        does not exist in HTML 4.01 Strict or XHTML 1.0 Strict) or if the developer
                        prefers not to use it, new windows can be opened with ECMAScript. The
                        example below demonstrates how to open new windows with script: it adds an
                        event handler to a link (<code>a</code> element) and warns the user that the
                        content will open in a new window. </p></div><h3 class="small-head" id="SCR24-examples">Examples</h3><h4 class="small-head" id="SCR24-ex1">Example 1: </h4><div class="example"><div class="textbody"><p>Markup:</p><p> The script is included in the head of the document, and the link has
                                an id that can be used as a hook by the script. </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;script type="text/javascript" src="popup.js"&gt;&lt;/script&gt;
…
&lt;a href="help.html" id="newwin"&gt;Show Help&lt;/a</code></pre></div><div class="textbody"><p>Script:</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code> 
// Use traditional event model whilst support for event registration
// amongst browsers is poor.
window.onload = addHandlers;

function addHandlers()
{
  var objAnchor = document.getElementById('newwin');

  if (objAnchor)
  {
    objAnchor.firstChild.data = objAnchor.firstChild.data + ' (opens in a new window)';
    objAnchor.onclick = function(event){return launchWindow(this, event);}
    // UAAG requires that user agents handle events in a device-independent manner
    // but only some browsers do this, so add keyboard event to be sure
    objAnchor.onkeypress = function(event){return launchWindow(this, event);}
  }
}

function launchWindow(objAnchor, objEvent)
{
  var iKeyCode, bSuccess=false;

  // If the event is from a keyboard, we only want to open the
  // new window if the user requested the link (return or space)
  if (objEvent &amp;&amp; objEvent.type == 'keypress')
  {
    if (objEvent.keyCode)
      iKeyCode = objEvent.keyCode;
    else if (objEvent.which)
      iKeyCode = objEvent.which;

    // If not carriage return or space, return true so that the user agent
    // continues to process the action
    if (iKeyCode != 13 &amp;&amp; iKeyCode != 32)
      return true;
  }

  bSuccess = window.open(objAnchor.href);

  // If the window did not open, allow the browser to continue the default
  // action of opening in the same window
  if (!bSuccess)
    return true;

  // The window was opened, so stop the browser processing further
  return false;
}</code></pre></div></div><h3 id="SCR24-resources">Resources</h3><div class="textbody"><p>Resources are for information purposes only, no endorsement implied.</p><ul><li><p>
                  <a href="https://en.wikipedia.org/wiki/Progressive_enhancement">Wikipedia: Progressive Enhancement</a>
               </p></li></ul></div><h3 id="SCR24-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/H83">H83: Using the target attribute to open a new window on user request and indicating this in link text</a></li></ul></div><h3 id="SCR24-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR24-procedure">Procedure</h4><ol class="enumar"><li><p> Activate each link in the document to check if it opens a new window. </p></li><li><p>For each link that opens a new window, check that it uses script to accomplish each of the following:</p><ol class="enumla"><li><p>indicates that the link will open in a new window,</p></li><li><p>uses device-independent event handlers, and</p></li><li><p>allows the browser to open the content in the same window if a new window was not opened.</p></li></ol></li></ol><h4 class="small-head" id="SCR24-results">Expected Results</h4><ul><li><p> #2 is true. </p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR26" id="SCR26"> </a>SCR26: Inserting dynamic content into the Document Object Model immediately following its trigger element</h2><div class="applicability"><h3 id="SCR26-applicability">Applicability</h3><div class="textbody"><p>HTML and XHTML, script</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#navigation-mechanisms-focus-order">
				Success Criterion 2.4.3 (Focus Order)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#navigation-mechanisms-focus-order">
						How to Meet 2.4.3 (Focus Order)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/navigation-mechanisms-focus-order.html">
						Understanding Success Criterion 2.4.3 (Focus Order)
					</a></li></ul></li></ul><h3 id="SCR26-description">Description</h3><div class="textbody"><p>The objective of this technique is to place inserted user interface elements into the Document Object Model (DOM) in such a way that the tab order and screen-reader reading order are set correctly by the default behavior of the user agent. This technique can be used for any user interface element that is hidden and shown, such as menus and dialogs.</p><p>The reading order in a screen-reader is based on the order of the HTML or XHTML elements in the Document Object Model, as is the default tab order. This technique inserts new content into the DOM immediately following the element that was activated to trigger the script. The triggering element must be a link or a button, and the script must be called from its onclick event. These elements are natively focusable, and their onclick event is device independent. Focus remains on the activated element and the new content, inserted after it, becomes the next thing in both the tab order and screen-reader reading order.</p><p>Note that this technique works for synchronous updates. For asynchronous updates (sometimes called AJAX), an additional technique is needed to inform the assistive technology that the asynchronous content has been inserted. </p></div><h3 class="small-head" id="SCR26-examples">Examples</h3><h4 class="small-head" id="SCR26-ex1">Example 1</h4><div class="example"><div class="textbody"><p>This example creates a menu when a link is clicked and inserts it after the link. The onclick event of the link is used to call the ShowHide script, passing in an ID for the new menu as a parameter.</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>&lt;a href="#" onclick="ShowHide('foo',this)"&gt;Toggle&lt;/a&gt;</code></pre></div><div class="textbody"><p>The ShowHide script creates a div containing the new menu, and inserts a link into it. The last line is the core of the script. It finds the parent of the element that triggered the script, and appends the div it created as a new child to it. This causes the new div to be in the DOM after the link. When the user hits tab, the focus will go to the first focusable item in the menu, the link we created.</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>function ShowHide(id,src)
{
	var el = document.getElementById(id);
	if (!el)
	{
		el = document.createElement("div");
		el.id = id;
		var link = document.createElement("a");
		link.href = "javascript:void(0)";
		link.appendChild(document.createTextNode("Content"));
		el.appendChild(link);
		src.parentElement.appendChild(el);
	}
	else
	{
		el.style.display = ('none' == el.style.display ? 'block' : 'none');
	}
}</code></pre></div><div class="textbody"><p>CSS is used to make the div and link look like a menu.</p></div></div><h3 id="SCR26-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR26-procedure">Procedure</h4><ol class="enumar"><li><p>Find all areas of the page that trigger dialogs that are not pop-up windows.</p></li><li><p>Check that the dialogs are triggered from the click event of a button or a link.</p></li><li><p>Using a tool that allows you to inspect the DOM generated by script, check that the dialog is next in the DOM.</p></li></ol><h4 class="small-head" id="SCR26-results">Expected Results</h4><ul><li><p>#2 and #3 are true.</p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR27" id="SCR27"> </a>SCR27: Reordering page sections using the Document Object Model</h2><div class="applicability"><h3 id="SCR27-applicability">Applicability</h3><div class="textbody"><p>HTML and XHTML, script</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#navigation-mechanisms-focus-order">
				Success Criterion 2.4.3 (Focus Order)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#navigation-mechanisms-focus-order">
						How to Meet 2.4.3 (Focus Order)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/navigation-mechanisms-focus-order.html">
						Understanding Success Criterion 2.4.3 (Focus Order)
					</a></li></ul></li></ul><h3 id="SCR27-description">Description</h3><div class="textbody"><p>The objective of this technique is to provide a mechanism for re-ordering component which is both highly usable and accessible. The two most common mechanisms for reordering are to send users to a set-up page where they can number components, or to allow them to drag and drop components to the desired location. The drag and drop method is much more usable, as it allows the user to arrange the items in place, one at a time, and get a feeling for the results. Unfortunately, drag and drop relies on the use of a mouse. This technique allows users to interact with a menu on the components to reorder them in place in a device independent way. It can be used in place of, or in conjunction with drag and drop reordering functionality.</p><p>The menu is a list of links using the device-independent onclick event to trigger scripts which re-order the content. The content is re-ordered in the Document Object Model (DOM), not just visually, so that it is in the correct order for all devices. </p></div><h3 class="small-head" id="SCR27-examples">Examples</h3><h4 class="small-head" id="SCR27-ex1">Example 1</h4><div class="example"><div class="textbody"><p>This example does up and down reordering. This approach can also be used for two-dimensional reordering by adding left and right options.</p><p>The components in this example are list items in an unordered list. Unordered lists are a very good semantic model for sets of similar items, like these components. The menu approach can also be used for other types of groupings.</p><p>The modules are list items, and each module, in addition to content in div elements, contains a menu represented as a nested list. </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>&lt;ul id="swapper"&gt;
    &lt;li id="black"&gt;
        &lt;div class="module"&gt;
            &lt;div class="module_header"&gt;
                &lt;!-- menu link --&gt;
                &lt;a href="#" onclick="ToggleMenu(event);"&gt;menu&lt;/a&gt;
                &lt;!-- menu --&gt;
                &lt;ul class="menu"&gt;
                    &lt;li&gt;&lt;a href="#" onclick="OnMenuClick(event)" 
                        onkeypress="OnMenuKeypress(event);"&gt;up&lt;/a&gt;&lt;/li&gt;
                    &lt;li&gt;&lt;a href="#" onclick="OnMenuClick(event)" 
                        onkeypress="OnMenuKeypress(event);"&gt;down&lt;/a&gt;&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/div&gt;
            &lt;div class="module_body"&gt;
                Text in the black module
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/li&gt;
    ...
&lt;/ul&gt;</code></pre></div><div class="textbody"><p>Since we've covered the showing and hiding of menus in the simple tree samples, we'll focus here just on the code that swaps the modules. Once we harmonize the events and cancel the default link action, we go to work. First, we set a bunch of local variables for the elements with which we'll be working: the menu, the module to be reordered, the menuLink. Then, after checking the reorder direction, we try to grab the node to swap. If we find one, we then call swapNode() to swap our two modules, and PositionElement() to move the absolutely-positioned menu along with the module, and then set focus back on the menu item which launched the whole thing.</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>function MoveNode(evt,dir)
{
    HarmonizeEvent(evt);
    evt.preventDefault();

    var src = evt.target;
    var menu = src.parentNode.parentNode;
    var module = menu.parentNode.parentNode.parentNode;
    var menuLink = module.getElementsByTagName("a")[0];
    var swap = null;
    
    switch(dir)
    {
        case 'up':
        {
            swap = module.previousSibling;
            while (swap &amp;&amp; swap.nodeType != 1)
            {
                swap = swap.previousSibling;
            }
            break;
        }
        case 'down':
        {
            swap = module.nextSibling;
            while (swap &amp;&amp; swap.nodeType != 1)
            {
                swap = swap.nextSibling;
            }
            break;
        }
    }
    if (swap &amp;&amp; swap.tagName == node.tagName)
    {
        module.swapNode(swap);
        PositionElement(menu,menuLink,false,true);
    }
    src.focus();
}</code></pre></div><div class="textbody"><p>The CSS for the node swap is not much different than that of our previous tree samples, with some size and color adjustment for the modules and the small menu.</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>ul#swapper { margin:0px; padding:0px; list-item-style:none; }
ul#swapper li { padding:0; margin:1em; list-style:none; height:5em; width:15em; 
    border:1px solid black; }
ul#swapper li a { color:white; text-decoration:none; font-size:90%; }

ul#swapper li div.module_header { text-align:right; padding:0 0.2em; }
ul#swapper li div.module_body { padding:0.2em; }

ul#swapper ul.menu { padding:0; margin:0; list-style:none; background-color:#eeeeee; 
    height:auto; position:absolute; text-align:left; border:1px solid gray; display:none; }
ul#swapper ul.menu li { height:auto; border:none; margin:0; text-align:left; 
    font-weight:normal; width:5em; }
ul#swapper ul.menu li a { text-decoration:none; color:black; padding:0 0.1em; 
    display:block; width:100%; }
</code></pre></div></div><h3 id="SCR27-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR27-procedure">Procedure</h4><ol class="enumar"><li><p>Find all components in the Web Unit which can be reordered via drag and drop.</p></li><li><p>Check that there is also a mechanism to reorder them using menus build of lists of links.</p></li><li><p>Check that the menus are contained within the reorderable items in the DOM.</p></li><li><p>Check that scripts for reordering are triggered only from the onclick event of links.</p></li><li><p>Check that items are reordered in the DOM, not only visually.</p></li></ol><h4 class="small-head" id="SCR27-results">Expected Results</h4><ul><li><p>#2 through #5 are true.</p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR28" id="SCR28"> </a>SCR28: Using an expandable and collapsible menu to bypass block of content</h2><div class="applicability"><h3 id="SCR28-applicability">Applicability</h3><div class="textbody"><p>Technologies that provide client side scripting.</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#navigation-mechanisms-skip">
				Success Criterion 2.4.1 (Bypass Blocks)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#navigation-mechanisms-skip">
						How to Meet 2.4.1 (Bypass Blocks)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/navigation-mechanisms-skip.html">
						Understanding Success Criterion 2.4.1 (Bypass Blocks)
					</a></li></ul></li></ul><h3 id="SCR28-description">Description</h3><div class="textbody"><p>This technique allows users to skip repeated material by placing that material in a menu that can be expanded or collapsed under user control. The user can skip the repeated material by collapsing the menu. The user invokes a user interface control to hide or remove the elements of the menu. The resources section lists several techniques for menus, toolbars and trees, any of which can be used to provide a mechanism for skipping navigation.</p><div class="note"><p class="prefix"><em>Note: </em>Similiar approaches can be implemented using server-side scripting and reloading a modified version of the Web page.</p></div></div><h3 class="small-head" id="SCR28-examples">Examples</h3><h4 class="small-head" id="SCR28-ex1">Example 1</h4><div class="example"><div class="textbody"><p>The navigation links at top of a Web page are all entries in a menu implemented using HTML, CSS, and Javascript. When the navigation bar is expanded, the navigation links are available to the user. When the navigation bar is collapsed, the links are not available.</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
...

  &lt;script type="text/javascript"&gt;
  function toggle(id){
    var n = document.getElementById(id);
    n.style.display =  (n.style.display != 'none' ? 'none' : '' );
  }
  &lt;/script&gt;

...

  &lt;a href="#" onclick="toggle('navbar')"&gt;Toggle Navigation Bar&lt;/a&gt;

  &lt;ul id="navbar"&gt;
  &lt;li&gt;&lt;a href="http://target1.html"&gt;Link 1&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="http://target2.html"&gt;Link 2&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="http://target3.html"&gt;Link 3&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="http://target4.html"&gt;Link 4&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;

...
</code></pre></div><div class="textbody"><p>Working example of this code: <a href="/WAI/WCAG20/Techniques/working-examples/SCR28/toggle-navbar.html" class="ex-ref">Toggle navigation bar with a link</a>.</p></div></div><h4 class="small-head" id="SCR28-ex2">Example 2</h4><div class="example"><div class="textbody"><p>The table of contents for a set of Web pages is repeated near the beginning of each Web page. A button at the beginning of the table of contents lets the user remove or restore it on the page.</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
...

   &lt;script type="text/javascript"&gt;
  function toggle(id){
    var n = document.getElementById(id);
    n.style.display =  (n.style.display != 'none' ? 'none' : '' );
  }
  &lt;/script&gt;

  ...

  &lt;button onclick="return toggle('toc');"&gt;Toggle Table of Contents&lt;/button&gt;
  &lt;div id="toc"&gt;
    ...
  &lt;/div&gt;

...
</code></pre></div><div class="textbody"><p>Working example of this code: <a href="/WAI/WCAG20/Techniques/working-examples/SCR28/toggle-toc.html" class="ex-ref">Toggle table of contents with a button</a>.</p></div></div><h3 id="SCR28-resources">Resources</h3><div class="textbody"><p>Resources are for information purposes only, no endorsement implied.</p><ul><li><p>
                  <a href="http://www.bobbyvandersluis.com/articles/unobtrusive-show-hide/">Unobtrusive show/hide behavior reloaded</a>
               </p></li><li><p>
                  <a href="http://www.dustindiaz.com/seven-togglers/">Seven ways to toggle an element with JavaScript</a>
               </p></li></ul></div><h3 id="SCR28-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/H69">H69: Providing heading elements at the beginning of each section of content</a></li><li/><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/H70">H70: Using frame elements to group blocks of repeated material</a></li></ul></div><h3 id="SCR28-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR28-procedure">Procedure</h4><ol class="enumar"><li><p>Check that some user interface control allows the repeated content to be expanded or collapsed.</p></li><li><p>Check that when the content is expanded, it is included in the programmatically determined content at a logical place in the reading order.</p></li><li><p>Check that when the content is collapsed, it is not part of the programmatically determined content.</p></li></ol><h4 class="small-head" id="SCR28-results">Expected Results</h4><ul><li><p>All checks above are true.</p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR29" id="SCR29"> </a>SCR29: Adding keyboard-accessible actions to static HTML elements</h2><div class="applicability"><h3 id="SCR29-applicability">Applicability</h3><div class="textbody"><p>HTML and XHTML, Script</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#keyboard-operation-keyboard-operable">
				Success Criterion 2.1.1 (Keyboard)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#keyboard-operation-keyboard-operable">
						How to Meet 2.1.1 (Keyboard)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/keyboard-operation-keyboard-operable.html">
						Understanding Success Criterion 2.1.1 (Keyboard)
					</a></li></ul></li><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#keyboard-operation-all-funcs">
				Success Criterion 2.1.3 (Keyboard (No Exception))</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#keyboard-operation-all-funcs">
						How to Meet 2.1.3 (Keyboard (No Exception))
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/keyboard-operation-all-funcs.html">
						Understanding Success Criterion 2.1.3 (Keyboard (No Exception))
					</a></li></ul></li></ul><div class="ua-issues"><h3 class="small-head" id="ua1.14.1"> User Agent and Assistive Technology Support Notes</h3><p>See <a href="/WAI/WCAG20/Techniques/ua-notes/client-side-script#SCR29">User Agent Support Notes for SCR29</a>.</p></div><h3 id="SCR29-description">Description</h3><div class="textbody"><p>The objective of this technique is to demonstrate how to provide keyboard access to a user interface control that is implemented by actions to static HTML elements such as <code>div</code> or <code>span</code>. This technique ensures that the element is focusable by setting the <code>tabindex</code> attribute, and it ensures that the action can be triggered from the keyboard by providing an <code>onkeyup</code> or <code>onkeypress</code> handler in addition to an <code>onclick</code> handler. </p><p>When the <code>tabindex</code> attribute has the value 0, the element can be focused via the keyboard and is included in the tab order of the document. When the <code>tabindex</code> attribute has the value -1, the element cannot be tabbed to, but focus can be set programmatically, using <code>element.focus()</code>.</p><p>Because static HTML elements do not have actions associated with them, it is not possible to provide a backup implementation or explanation in environments in which scripting is not available. This technique should only be used in environments in which client-side scripting can be relied upon.</p><div class="note"><p class="prefix"><em>Note: </em> Such user interface controls must still satisfy Success Criterion 4.1.2. Applying this technique without also providing role, name, and state information about the user interface control will results in Failure F59, Failure of Success Criterion 4.1.2 due to using script to make div or span a user interface control in HTML.</p></div></div><h3 class="small-head" id="SCR29-examples">Examples</h3><h4 class="small-head" id="SCR29-ex1">Example 1:  Adding a JavaScript action to a div element</h4><div class="example"><div class="textbody"><p>The <code>div</code> element on the page is given a unique <code>id</code> attribute and a <code>tabindex</code> attribute with value 0.  A script uses the Document Object Model (DOM) to find the <code>div</code> element by its id and add the <code>onclick</code> handler and the <code>onkeyup</code> handler. The <code>onkeyup</code> handler will invoke the action when the Enter key is pressed. Note that the <code>div</code> element must be loaded into the DOM before it can be found and modified. This is usually accomplished by calling the script from the <code>onload</code> event of the <code>body</code> element.  The script to add the event handlers will only execute if the user agent supports and has JavaScript enabled.   </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
...
&lt;script type="text/javascript"&gt;
 // this is the function to perform the action. This simple example toggles a message.
 function doSomething(event) {
   var msg=document.getElementById("message");
   msg.style.display = msg.style.display=="none" ? "" : "none";
   //return false from the function to make certain that the href of the link does not get invoked
   return false;
 }
 // this is the function to perform the action when the Enter key has been pressed.  
 function doSomethingOnEnter(event) {
   var key = 0;
   // Determine the key pressed, depending on whether window.event or the event object is in use
   if (window.event) {
     key = window.event.keyCode;
   } else if (event) {
     key = event.keyCode;
   }
   // Was the Enter key pressed?
   if (key == 13) {
     return doSomething(event);
   } 
   // The event has not been handled, so return true
   return true;
 }
 // This setUpActions() function must be called to set the onclick and onkeyup event handlers onto the existing 
 // div element. This function must be called after the div element with id="active" has been loaded into the DOM.
 // In this example the setUpActions() function is called from the onload event for the body element.
 function setUpActions() {
   // get the div object
   var active=document.getElementById("active");
   // assign the onclick handler to the object.
   // It is important to return false from the onclick handler to prevent the href attribute
   // from being followed after the function returns.
   active.onclick=doSomething;
   // assign the onkeyup handler to the object.
   active.onkeyup=doSomethingOnEnter;
 }
 &lt;/script&gt;

 &lt;body onload="setUpActions();"&gt;
 &lt;p&gt;Here is the link to modify with a javascript action:&lt;/p&gt;
 &lt;div&gt;
  &lt;span id="active" tabindex="0"&gt;Do Something&lt;/span&gt;
 &lt;/div&gt;
 &lt;div id="message"&gt;Hello, world!&lt;/div&gt;
...
</code></pre></div><div class="textbody"><p>Working example of this code: <a href="/WAI/WCAG20/Techniques/working-examples/SCR29/action-on-div.html" class="ex-ref">Creating Divs with Actions using JavaScript</a>.</p></div></div><h3 id="SCR29-resources">Resources</h3><div class="textbody"><p>Resources are for information purposes only, no endorsement implied.</p><ul><li><p>HTML 4.01 <a href="http://www.w3.org/TR/REC-html40/interact/scripts.html">Scripts</a>
               </p></li><li><p>HTML 4.01 <a href="http://www.w3.org/TR/REC-html40/interact/forms.html#h-17.11">Giving focus to an element</a>
               </p></li><li><p>Accessible Rich Internet Applications (WAI-ARIA) Version 1.0 <a href="http://www.w3.org/TR/wai-aria/states_and_properties#global_states">Global States and Properties</a>
               </p></li><li><p>WAI-ARIA Primer, <a href="http://www.w3.org/TR/wai-aria-primer/#focus">Provision of the keyboard or input focus</a>
               </p></li><li><p>
                  <a href="http://www.w3.org/DOM/DOMTR">Document Object Model (DOM) Technical Reports</a>
               </p></li><li><p>
                  <a href="https://msdn.microsoft.com/en-us/library/ms534654(VS.85).aspx">Internet Explorer, HTML and DHTML Reference, tabIndex Property</a>
               </p></li></ul></div><h3 id="SCR29-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SCR20">SCR20: Using both keyboard and other device-specific functions</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SCR24">SCR24: Using progressive enhancement to open new windows on user request</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SCR35">SCR35: Making actions keyboard accessible by using the onclick event of anchors and buttons</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/F59">F59: Failure of Success Criterion 4.1.2 due to using script to make div or span a user interface control in HTML without providing a role for the control</a></li></ul></div><h3 id="SCR29-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR29-procedure">Procedure</h4><p>In a user agent that supports Scripting:</p><ol class="enumar"><li><p>Click on the control with the mouse</p></li><li><p>Check that the scripting action executes properly</p></li><li><p>Check that it is possible to navigate to and give focus to the control via the keyboard</p></li><li><p>Set keyboard focus to the control</p></li><li><p>Check that pressing ENTER invokes the scripting action.</p></li></ol><h4 class="small-head" id="SCR29-results">Expected Results</h4><ul><li><p>All of the checks are true</p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR30" id="SCR30"> </a>SCR30: Using scripts to change the link text</h2><div class="applicability"><h3 id="SCR30-applicability">Applicability</h3><div class="textbody"><p>Client-side scripting used with HTML and XHTML</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#navigation-mechanisms-refs">
				Success Criterion 2.4.4 (Link Purpose (In Context))</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#navigation-mechanisms-refs">
						How to Meet 2.4.4 (Link Purpose (In Context))
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/navigation-mechanisms-refs.html">
						Understanding Success Criterion 2.4.4 (Link Purpose (In Context))
					</a></li></ul></li><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#navigation-mechanisms-link">
				Success Criterion 2.4.9 (Link Purpose (Link Only))</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#navigation-mechanisms-link">
						How to Meet 2.4.9 (Link Purpose (Link Only))
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/navigation-mechanisms-link.html">
						Understanding Success Criterion 2.4.9 (Link Purpose (Link Only))
					</a></li></ul></li></ul><h3 id="SCR30-description">Description</h3><div class="textbody"><p>The purpose of this technique is to allow users to choose to have additional information added to the text of links so that the links can be understood out of context.</p><p>Some users prefer to have links that are self-contained, where there is no need to explore the context of the link. Other users find including the context information in each link to be repetitive and to reduce their ability to use a site. Among users of assistive technology, the feedback to the working group on which is preferable has been divided. This technique allows users to pick the approach that works best for them.</p><p>A link is provided near the beginning of the page that will expand the link text of the links on the page so that no additional context is needed to understand the purpose of any link. It must always be possible to understand the purpose of the expansion link directly from its link text.</p><p>This technique expands the links only for the current page view. It is also possible, and in some cases would be advisable, to save this preference in a cookie or server-side user profile, so that users would only have to make the selection once per site. </p></div><h3 class="small-head" id="SCR30-examples">Examples</h3><h4 class="small-head" id="SCR30-ex1">Example 1</h4><div class="example"><div class="textbody"><p>This example uses Javascript to add contextual information directly to the text of a link. The link class is used to determine which additional text to add. When the "Expand Links" link is activated, each link on the page is tested to see whether additional text should be added.</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
...
&lt;script type="text/javascript"&gt;
var expanded = false;
var linkContext = {
	"hist":" version of The History of the Web",
	"cook":" version of Cooking for Nerds"
};

function doExpand() {
	var links = document.links;
	
	for (link of links) {
		var cn = link.className;
		if (linkContext[cn]) {
			span = link.appendChild(document.createElement("span"));
			span.setAttribute("class", "linkexpansion");
			span.appendChild(document.createTextNode(linkContext[cn]));
		}
	}
	objUpdate = document.getElementById('expand');
	if (objUpdate)
	{
		objUpdate.childNodes[0].nodeValue = "Collapse links";
	}
	expanded = true;
}

function doCollapse() {
	objUpdate = document.getElementById('expand');
	var spans = document.getElementsByTagName("span");
	var span;

	// go backwards through the set as removing from the front changes indices
	// and messes up the process
	for (i = spans.length - 1; i &gt;= 0; i--) {
		span = spans[i];
		if (span.getAttribute("class") == "linkexpansion")
			span.parentNode.removeChild(span);
	}
	if (objUpdate)
	{
		objUpdate.childNodes[0].nodeValue = "Expand links";
	}
	expanded = false;
}

function toggle() {
	if (expanded) doCollapse();
	else doExpand();
}
&lt;/script&gt;

...

&lt;h1&gt;Books for download&lt;/h1&gt;
&lt;p&gt;&lt;button id="expand" onclick="toggle();"&gt;Expand Links&lt;/button&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The History of the Web: &lt;a href="history.docx" class="hist"&gt;Word&lt;/a&gt;, &lt;a href="history.pdf" class="hist"&gt;PDF&lt;/a&gt;, &lt;a href="history.html" class="hist"&gt;HTML&lt;/a&gt; &lt;/li&gt;

	&lt;li&gt;Cooking for Nerds: &lt;a href="history.docx" class="cook"&gt;Word&lt;/a&gt;, &lt;a href="history.pdf" class="cook"&gt;PDF&lt;/a&gt;, &lt;a href="history.html" class="cook"&gt;HTML&lt;/a&gt; &lt;/li&gt;
&lt;/ul&gt;

...
</code></pre></div><div class="textbody"><p>Working example of this code: <a href="/WAI/WCAG20/Techniques/working-examples/SCR30/expand-links" class="ex-ref">Providing link expansions on demand</a>.</p></div></div><h3 id="SCR30-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G91">G91: Providing link text that describes the purpose of a link</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/H30">H30: Providing link text that describes the purpose of a link for anchor elements</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/H33">H33: Supplementing link text with the title attribute</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/C7">C7: Using CSS to hide a portion of the link text </a></li></ul></div><h3 id="SCR30-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR30-procedure">Procedure</h4><ol class="enumar"><li><p>Check that there is a link near the beginning of the page to expand links</p></li><li><p>Check that the link identified in step 1 can be identified from link text alone</p></li><li><p>Find any links on the page that cannot be identified from link text alone</p></li><li><p>Activate the control identified in step 1</p></li><li><p>Check that the purpose of the links identified in step 3 can now be identified from link text alone</p></li></ol><h4 class="small-head" id="SCR30-results">Expected Results</h4><ul><li><p>Checks #1, #2, and #5 are true</p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR31" id="SCR31"> </a>SCR31: Using script to change the background color or border of the element with focus</h2><div class="applicability"><h3 id="SCR31-applicability">Applicability</h3><div class="textbody"><p>HTML and XHTML, CSS, Script</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#navigation-mechanisms-focus-visible">
				Success Criterion 2.4.7 (Focus Visible)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#navigation-mechanisms-focus-visible">
						How to Meet 2.4.7 (Focus Visible)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/navigation-mechanisms-focus-visible.html">
						Understanding Success Criterion 2.4.7 (Focus Visible)
					</a></li></ul></li></ul><div class="ua-issues"><h3 class="small-head" id="ua1.16.1"> User Agent and Assistive Technology Support Notes</h3><p>See <a href="/WAI/WCAG20/Techniques/ua-notes/client-side-script#SCR31">User Agent Support Notes for SCR31</a>.</p></div><h3 id="SCR31-description">Description</h3><div class="textbody"><p>This purpose of this technique is to allow the author to use JavaScript to apply CSS, in order to make the focus indicator more visible than it would ordinarily be. When an element receives focus, the background color or border is changed to make it visually distinct. When the element loses focus, it returns to its normal styling. This technique can be used on any HTML user agent that supports Script and CSS, regardless of whether it supports the :focus pseudoclass.</p></div><h3 class="small-head" id="SCR31-examples">Examples</h3><h4 class="small-head" id="SCR31-ex1">Example 1</h4><div class="example"><div class="textbody"><p>In this example, when the link receives focus, its background turns yellow. When it loses focus, the yellow is removed. Note that if the link had a background color to begin with, you would use that color rather than "" in the script.</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
...
&lt;script&gt;
 function toggleFocus(el)
 {
  el.style.backgroundColor =  el.style.backgroundColor=="yellow" ? "inherit" : "yellow";
 }
&lt;/script&gt;

...

&lt;a href="example.html" onfocus="toggleFocus(this)" onblur="toggleFocus(this)"&gt;focus me&lt;/a&gt;
...
</code></pre></div></div><h3 id="SCR31-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/C15">C15: Using CSS to change the presentation of a user interface component when it receives focus</a></li></ul></div><h3 id="SCR31-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR31-procedure">Procedure</h4><ol class="enumar"><li><p>Tab to each element in the page</p></li><li><p>Check that the focus indicator is visible</p></li></ol><h4 class="small-head" id="SCR31-results">Expected Results</h4><ul><li><p>Step #2 is true</p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR32" id="SCR32"> </a>SCR32: Providing client-side validation and adding error text via the DOM</h2><div class="applicability"><h3 id="SCR32-applicability">Applicability</h3><div class="textbody"><p>Script used with HTML or XHTML.</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#minimize-error-identified">
				Success Criterion 3.3.1 (Error Identification)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#minimize-error-identified">
						How to Meet 3.3.1 (Error Identification)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/minimize-error-identified.html">
						Understanding Success Criterion 3.3.1 (Error Identification)
					</a></li></ul></li><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#minimize-error-suggestions">
				Success Criterion 3.3.3 (Error Suggestion)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#minimize-error-suggestions">
						How to Meet 3.3.3 (Error Suggestion)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/minimize-error-suggestions.html">
						Understanding Success Criterion 3.3.3 (Error Suggestion)
					</a></li></ul></li></ul><h3 id="SCR32-description">Description</h3><div class="textbody"><p>The objective of this technique is to demonstrate the display of an error message when client side validation of a form field has failed. Anchor elements are used to display the error messages in a list and are inserted above the fields to be validated. Anchor elements are used in the error messages so that focus can be placed on the error message(s), drawing the user's attention to it. The <code>href</code> of the anchor elements contain an in-page link which references the fields where error(s) have been found. </p><p>In a deployed application, if Javascript is turned off, client side validation will not occur. Therefore, this technique would only be sufficient in situations where scripting is relied upon for conformance or when server side validation techniques are also used to catch any errors and return the page with information about the fields with errors. </p></div><h3 class="small-head" id="SCR32-examples">Examples</h3><h4 class="small-head" id="SCR32-ex1">Example 1</h4><div class="example"><div class="textbody"><p>This example validates required fields as well as fields where a specific format is required. When an error is identified, the script inserts a list of error messages into the DOM and moves focus to them.</p><img src="/WAI/WCAG20/Techniques/working-examples/SCR32/form2.jpg" class="eximg" alt="Screenshot showing the error messages for several fields that were not filled out correctly. Error messages appear as a list of links near the top of the form."/><p>
               <em>HTML and Javascript code </em>
            </p><p>Here is the HTML for the example form: </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Form Validation&lt;/title&gt;
        &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"/&gt;
        &lt;link href="css/validate.css" rel="stylesheet" type="text/css"/&gt;
        &lt;script type="text/javascript" src="scripts/validate.js"/&gt;
    &lt;/head&gt;
    &lt;body&gt;

        &lt;h1&gt;Form Validation&lt;/h1&gt;

        &lt;p&gt;The following form is validated before being submitted if scripting is available,
            otherwise the form is validated on the server. All fields are required, except those
            marked optional. If errors are found in the submission, the form is cancelled and 
            a list of errors is displayed at the top of the form.&lt;/p&gt;

        &lt;p&gt; Please enter your details below. &lt;/p&gt;

        &lt;h2&gt;Validating Form&lt;/h2&gt;

        &lt;form id="personalform" method="post" action="index.php"&gt;
            &lt;div class="validationerrors"/&gt;
            &lt;fieldset&gt;
                &lt;legend&gt;Personal Details&lt;/legend&gt;
                &lt;p&gt;
                    &lt;label for="forename"&gt;Please enter your forename&lt;/label&gt;
                    &lt;input type="text" size="20" name="forename" id="forename" class="string"
                        value=""/&gt;
                &lt;/p&gt;
                &lt;p&gt;
                    &lt;label for="age"&gt;Please enter your age&lt;/label&gt;
                    &lt;input type="text" size="20" name="age" id="age" class="number" value=""/&gt;
                &lt;/p&gt;
                &lt;p&gt;
                    &lt;label for="email"&gt;Please enter your email address&lt;/label&gt;
                    &lt;input type="text" size="20" name="email" id="email" class="email" value=""/&gt;
                &lt;/p&gt;
            &lt;/fieldset&gt;
            &lt;p&gt;
                &lt;input type="submit" name="signup" value="Sign up"/&gt;
            &lt;/p&gt;
        &lt;/form&gt;
        &lt;h2&gt;Second Form&lt;/h2&gt;
        &lt;form id="secondform" method="post" action="index.php#focuspoint"&gt;
            &lt;div class="validationerrors"/&gt;
            &lt;fieldset&gt;
                &lt;legend&gt;Second Form Details&lt;/legend&gt;
                &lt;p&gt;
                    &lt;label for="suggestion"&gt;Enter a suggestion&lt;/label&gt;
                    &lt;input type="text" size="20" name="suggestion" id="suggestion" 
                      class="string" value=""/&gt;
                &lt;/p&gt;
                &lt;p&gt;
                    &lt;label for="optemail"&gt;Please enter your email address (optional)&lt;/label&gt;
                    &lt;input type="text" size="20" name="optemail" id="optemail"
                        class="optional email" value=""/&gt;
                &lt;/p&gt;
                &lt;p&gt;
                    &lt;label for="rating"&gt;Please rate this suggestion&lt;/label&gt;
                    &lt;input type="text" size="20" name="rating" id="rating" 
                      class="number" value=""/&gt;
                &lt;/p&gt;
                &lt;p&gt;
                    &lt;label for="jibberish"&gt;Enter some jibberish (optional)&lt;/label&gt;
                    &lt;input type="text" size="20" name="jibberish" id="jibberish" value=""/&gt;
                &lt;/p&gt;

            &lt;/fieldset&gt;
            &lt;p&gt;
                &lt;input type="submit" name="submit" value="Add Suggestion"/&gt;
            &lt;/p&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;                      </code></pre></div><div class="textbody"><p>Here is the Javascript which performs the validation and inserts the error messages: </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
window.onload = initialise;

function initialise()
{
   var objForms = document.getElementsByTagName('form');
   var iCounter;

   // Attach an event handler for each form
   for (iCounter=0; iCounter&lt;objForms.length; iCounter++)
   {
      objForms[iCounter].onsubmit = function(){return validateForm(this);};
   }
}


// Event handler for the form
function validateForm(objForm)
{
   var arClass = [];
   var iErrors = 0;
   var objField = objForm.getElementsByTagName('input');
   var objLabel = objForm.getElementsByTagName('label');
   var objList = document.createElement('ol');
   var objError, objExisting, objNew, objTitle, objParagraph, objAnchor, objPosition;
   var strLinkID, iFieldCounter, iClassCounter, iCounter;

   // Get the id or name of the form, to make a unique
   // fragment identifier
   if (objForm.id)
   {
      strLinkID = objForm.id + 'ErrorID';
   }
   else
   {
      strLinkID = objForm.name + 'ErrorID';
   }

   // Iterate through input form controls, looking for validation classes
   for (iFieldCounter=0; iFieldCounter&lt;objField.length; iFieldCounter++)
   {
      // Get the class for the field, and look for the appropriate class
      arClass = objField[iFieldCounter].className.split(' ');
      for (iClassCounter=0; iClassCounter&lt;arClass.length; iClassCounter++)
      {
         switch (arClass[iClassCounter])
         {
            case 'string':
               if (!isString(objField[iFieldCounter].value, arClass))
               {
                  if (iErrors === 0)
                  {
                     logError(objField[iFieldCounter], objLabel, objList, strLinkID);
                  }
                  else
                  {
                     logError(objField[iFieldCounter], objLabel, objList, '');
                  }
                  iErrors++;
               }
               break;
            case 'number':
               if (!isNumber(objField[iFieldCounter].value, arClass))
               {
                  if (iErrors === 0)
                  {
                     logError(objField[iFieldCounter], objLabel, objList, strLinkID);
                  }
                  else
                  {
                     logError(objField[iFieldCounter], objLabel, objList, '');
                  }
                  iErrors++;
               }
               break;

            case 'email' :
               if (!isEmail(objField[iFieldCounter].value, arClass))
               {
                  if (iErrors === 0)
                  {
                     logError(objField[iFieldCounter], objLabel, objList, strLinkID);
                  }
                  else
                  {
                     logError(objField[iFieldCounter], objLabel, objList, '');
                  }
                  iErrors++;
               }
               break;
         }
      }
   }

   if (iErrors &gt; 0)
   {
      // If not valid, display error messages
      objError = objForm.getElementsByTagName('div');
      
      // Look for existing errors
      for (iCounter=0; iCounter&lt;objError.length; iCounter++)
      {
         if (objError[iCounter].className == 'validationerrors')
         {
            objExisting = objError[iCounter];
         }
      }

      objNew = document.createElement('div');
      objTitle = document.createElement('h2');
      objParagraph = document.createElement('p');
      objAnchor = document.createElement('a');

      if (iErrors == 1)
      {
         objAnchor.appendChild(document.createTextNode('1 Error in Submission'));
      }
      else
      {
         objAnchor.appendChild(document.createTextNode(iErrors + ' Errors in Submission'));
      }
      objAnchor.href = '#' + strLinkID;
      objAnchor.className = 'submissionerror';

      objTitle.appendChild(objAnchor);
      objParagraph.appendChild(document.createTextNode('Please review the following'));
      objNew.className = 'validationerrors';

      objNew.appendChild(objTitle);
      objNew.appendChild(objParagraph);
      objNew.appendChild(objList);
      
      // If there were existing error, replace them with the new lot,
      // otherwise add the new errors to the start of the form
      if (objExisting)
      {
         objExisting.parentNode.replaceChild(objNew, objExisting);
      }
      else
      {
         objPosition = objForm.firstChild;
         objForm.insertBefore(objNew, objPosition);
      }

      // Allow for latency
      setTimeout(function() { objAnchor.focus(); }, 50);
      
      // Don't submit the form
      objForm.submitAllowed = false;
      return false;
   }

   // Submit the form
   return true;
}

// Function to add a link in a list item that points to problematic field control
function addError(objList, strError, strID, strErrorID)
{
   var objListItem = document.createElement('li');
   var objAnchor = document.createElement('a');
   
   // Fragment identifier to the form control
   objAnchor.href='#' + strID;

   // Make this the target for the error heading
   if (strErrorID.length &gt; 0)
   {
      objAnchor.id = strErrorID;
   }

   // Use the label prompt for the error message
   objAnchor.appendChild(document.createTextNode(strError));
   // Add keyboard and mouse events to set focus to the form control
   objAnchor.onclick = function(event){return focusFormField(this, event);};
   objAnchor.onkeypress = function(event){return focusFormField(this, event);};
   objListItem.appendChild(objAnchor);
   objList.appendChild(objListItem);
}

function focusFormField(objAnchor, objEvent)
{
   var strFormField, objForm;

   // Allow keyboard navigation over links
   if (objEvent &amp;&amp; objEvent.type == 'keypress')
   {
      if (objEvent.keyCode != 13 &amp;&amp; objEvent.keyCode != 32)
      {
         return true;
      }
   }

   // set focus to the form control
   strFormField = objAnchor.href.match(/[^#]\w*$/);
   objForm = getForm(strFormField);
   objForm[strFormField].focus();
   return false;
}

// Function to return the form element from a given form field name
function getForm(strField)
{
   var objElement = document.getElementById(strField);

   // Find the appropriate form
   do
   {
      objElement = objElement.parentNode;
   } while (!objElement.tagName.match(/form/i) &amp;&amp; objElement.parentNode);

   return objElement;
}

// Function to log the error in a list
function logError(objField, objLabel, objList, strErrorID)
{
   var iCounter, strError;

   // Search the label for the error prompt
   for (iCounter=0; iCounter&lt;objLabel.length; iCounter++)
   {
      if (objLabel[iCounter].htmlFor == objField.id)
      {
         strError = objLabel[iCounter].firstChild.nodeValue;
      }
   }

   addError(objList, strError, objField.id, strErrorID);
}

// Validation routines - add as required

function isString(strValue, arClass)
{
   var bValid = (typeof strValue == 'string' &amp;&amp; strValue.replace(/^\s*|\s*$/g, '') 
     !== '' &amp;&amp; isNaN(strValue));

   return checkOptional(bValid, strValue, arClass);
}

function isEmail(strValue, arClass)
{
   var objRE = /^[\w-\.\']{1,}\@([\da-zA-Z\-]{1,}\.){1,}[\da-zA-Z\-]{2,}$/;
   var bValid = objRE.test(strValue);

   return checkOptional(bValid, strValue, arClass);
}

function isNumber(strValue, arClass)
{
   var bValid = (!isNaN(strValue) &amp;&amp; strValue.replace(/^\s*|\s*$/g, '') !== '');

   return checkOptional(bValid, strValue, arClass);
}

function checkOptional(bValid, strValue, arClass)
{
   var bOptional = false;
   var iCounter;

   // Check if optional
   for (iCounter=0; iCounter&lt;arClass.length; iCounter++)
   {
      if (arClass[iCounter] == 'optional')
      {
         bOptional = true;
      }
   }

   if (bOptional &amp;&amp; strValue.replace(/^\s*|\s*$/g, '') === '')
   {
      return true;
   }

   return bValid;
   }
   </code></pre></div><div class="textbody"><p>Working example of this technique implemented using PHP, Javascript, CSS and XHTML: <a href="/WAI/WCAG20/Techniques/working-examples/SCR32/index.php" class="ex-ref">Form Validation Example</a>.</p></div></div><h3 id="SCR32-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G83">G83: Providing text descriptions to identify required fields that were not completed</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G85">G85: Providing a text description when user input falls outside the required format or values</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SCR18">SCR18: Providing client-side validation and alert</a></li></ul></div><h3 id="SCR32-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR32-procedure">Procedure</h4><p>Create error messages using anchor tags and appropriate scripting via the technique above. </p><ol class="enumar"><li><p>Load the page.</p></li><li><p>Enter a valid value in the field(s) associated with an error message and verify that no error messages are displayed. </p></li><li><p>Enter an invalid value in the field(s) associated with an error message and verify that the correct error message for the field is displayed. </p></li><li><p>Verify that the error messages receive focus.</p></li><li><p>Enter a valid value in the field(s) associated with the displayed error message and verify that the error message is removed. </p></li><li><p>Repeat for all fields with associated error messages created via anchor tags. </p></li></ol><div class="note"><p class="prefix"><em>Note: </em>It is recommended that you also run the above procedure using an assistive technology. </p></div><h4 class="small-head" id="SCR32-results">Expected Results</h4><ul><li><p>Checks #2, #3, #4, and #5 are all true.</p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR33" id="SCR33"> </a>SCR33: Using script to scroll content, and providing a mechanism to pause it</h2><div class="applicability"><h3 id="SCR33-applicability">Applicability</h3><div class="textbody"><p>Technologies that support script-controlled scrolling of content. </p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#time-limits-required-behaviors">
				Success Criterion 2.2.1 (Timing Adjustable)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#time-limits-required-behaviors">
						How to Meet 2.2.1 (Timing Adjustable)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/time-limits-required-behaviors.html">
						Understanding Success Criterion 2.2.1 (Timing Adjustable)
					</a></li></ul></li><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#time-limits-pause">
				Success Criterion 2.2.2 (Pause, Stop, Hide)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#time-limits-pause">
						How to Meet 2.2.2 (Pause, Stop, Hide)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/time-limits-pause.html">
						Understanding Success Criterion 2.2.2 (Pause, Stop, Hide)
					</a></li></ul></li></ul><h3 id="SCR33-description">Description</h3><div class="textbody"><p>The objective of this technique is to provide a way for users to stop scrolling content when the scrolling is created by a script. Scrolling content can be difficult or impossible to read by users with low vision or with cognitive disabilities. The movement can also be distracting for some people making it difficult for them to concentrate on other parts of the Web page. </p></div><h3 class="small-head" id="SCR33-examples">Examples</h3><h4 class="small-head" id="SCR33-ex1">Example 1</h4><div class="example"><div class="textbody"><p>In this example CSS and Javascript are used to visually present some text in a scrolling format. A link is included to pause the scrolling movement. </p><p>This implementation will display the full text and omit the link when Javascript or CSS are unsupported or inactive. </p><p>The following code is an amended version of webSemantic's Accessible Scroller (as at July 2008). </p><p>The XHTML component: </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
...
&lt;div id="scroller"&gt;
&lt;p id="tag"&gt;This text will scroll and a Pause/Scroll link will be present 
when Javascript and CSS are supported and active.&lt;/p&gt;
&lt;/div&gt;
...
</code></pre></div><div class="textbody"><p>The CSS component: </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
...
body {font:1em verdana,sans-serif; color:#000; margin:0}

/* position:relative and overflow:hidden are required */
#scroller { position:relative; overflow:hidden; width:15em; border:1px solid #008080; }

/* add formatting for the scrolling text */
#tag { margin:2px 0; }

/* #testP must also contain all text-sizing properties of #tag  */
#testP { visibility:hidden; position:absolute; white-space:nowrap; } 

/* used as a page top marker and to limit width */
#top { width:350px; margin:auto; }
...
</code></pre></div><div class="textbody"><p>The JavaScript component: </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
var speed=50        // speed of scroller
var step=3          // smoothness of movement
var StartActionText= "Scroll"  // Text for start link
var StopActionText = "Pause"   // Text for stop link

var x, scroll, divW, sText=""

function onclickIE(idAttr,handler,call){
  if ((document.all)&amp;&amp;(document.getElementById)){idAttr[handler]="Javascript:"+call}
}

function addLink(id,call,txt){
  var e=document.createElement('a')
  e.setAttribute('href',call)
  var linktext=document.createTextNode(txt)
  e.appendChild(linktext)
  document.getElementById(id).appendChild(e)
}

function getElementStyle() {
    var elem = document.getElementById('scroller');
    if (elem.currentStyle) {
        return elem.currentStyle.overflow;
    } else if (window.getComputedStyle) {
        var compStyle = window.getComputedStyle(elem, '');
        return compStyle.getPropertyValue("overflow");
    }
    return "";
}

function addControls(){
// test for CSS support first 
// test for the overlow property value set in style element or external file
if (getElementStyle()=="hidden") {
  var f=document.createElement('div');
  f.setAttribute('id','controls');
  document.getElementById('scroller').parentNode.appendChild(f);
  addLink('controls','Javascript:clickAction(0)',StopActionText);
  onclickIE(document.getElementById('controls').childNodes[0],"href",'clickAction(0)');
  document.getElementById('controls').style.display='block';
  }
}

function stopScroller(){clearTimeout(scroll)}

function setAction(callvalue,txt){
  var c=document.getElementById('controls')
  c.childNodes[0].setAttribute('href','Javascript:clickAction('+callvalue+')')
  onclickIE(document.getElementById('controls').childNodes[0],"href",'clickAction

('+callvalue+')')
  c.childNodes[0].firstChild.nodeValue=txt
}

function clickAction(no){
  switch(no) {
    case 0:
      stopScroller();
      setAction(1,StartActionText);
      break;
    case 1:
      startScroller();
      setAction(0,StopActionText);
  }
}

function startScroller(){
  document.getElementById('tag').style.whiteSpace='nowrap'
  var p=document.createElement('p')
  p.id='testP'
  p.style.fontSize='25%' //fix for mozilla. multiply by 4 before using
  x-=step
  if (document.getElementById('tag').className) p.className=document.getElementById

('tag').className
  p.appendChild(document.createTextNode(sText))
  document.body.appendChild(p)
  pw=p.offsetWidth
  document.body.removeChild(p)
  if (x&lt;(pw*4)*-1){x=divW}
  document.getElementById('tag').style.left=x+'px'
  scroll=setTimeout('startScroller()',speed)
}

function initScroller(){
  if (document.getElementById &amp;&amp; document.createElement &amp;&amp; document.body.appendChild) {
    addControls();
    divW=document.getElementById('scroller').offsetWidth;
    x=divW;
    document.getElementById('tag').style.position='relative';
    document.getElementById('tag').style.left=divW+'px';
    var ss=document.getElementById('tag').childNodes;
    for (i=0;i&lt;ss.length;i++) {sText+=ss[i].nodeValue+" "};
    scroll=setTimeout('startScroller()',speed);
  }
}

function addLoadEvent(func) {
  if (!document.getElementById | !document.getElementsByTagName) return
  var oldonload = window.onload
  if (typeof window.onload != 'function') {
    window.onload = func;
  } else {
    window.onload = function() {
      oldonload()
      func()
    }
  }
}

addLoadEvent(initScroller)
</code></pre></div><div class="textbody"><p>A working example of this code, <a href="/WAI/WCAG20/Techniques/working-examples/SCR33/Overview.html" class="ex-ref">Example of using script to scroll content and providing a mechanism to pause it</a>, is available.</p></div></div><h3 id="SCR33-resources">Resources</h3><div class="textbody"><p>Resources are for information purposes only, no endorsement implied.</p><ul><li><p>
                  <a href="http://www.websemantics.co.uk/tutorials/accessible_scroller/">webSemantics Accessible Scroller</a>
               </p></li></ul></div><h3 id="SCR33-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G4">G4: Allowing the content to be paused and restarted from where it was paused</a></li></ul></div><h3 id="SCR33-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR33-procedure">Procedure</h4><ol class="enumar"><li><p>Check that a mechanism is provided to pause the scrolling content. </p></li><li><p>Use the pause mechanism to pause the scrolling content. </p></li><li><p>Check that the scrolling has stopped and does not restart by itself. </p></li><li><p>Check that a mechanism is provided to restart the paused content. </p></li><li><p>Use the restart mechanism provided to restart the scrolling content. </p></li><li><p>Check that the scrolling has resumed from the point where it was stopped. </p></li></ol><h4 class="small-head" id="SCR33-results">Expected Results</h4><ul><li><p>Checks #3 and #6 are true. </p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR34" id="SCR34"> </a>SCR34: Calculating size and position in a way that scales with text size</h2><div class="applicability"><h3 id="SCR34-applicability">Applicability</h3><div class="textbody"><p>Client-side scripting.</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#visual-audio-contrast-scale">
				Success Criterion 1.4.4 (Resize text)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#visual-audio-contrast-scale">
						How to Meet 1.4.4 (Resize text)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/visual-audio-contrast-scale.html">
						Understanding Success Criterion 1.4.4 (Resize text)
					</a></li></ul><div class="note"><p class="prefix"><em>Note:</em> This technique must be combined with other techniques to meet <a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#visual-audio-contrast-scale">SC 1.4.4</a>. See <a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/visual-audio-contrast-scale.html"> Understanding SC 1.4.4</a> for details.</p></div></li><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#visual-audio-contrast-visual-presentation">
				Success Criterion 1.4.8 (Visual Presentation)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#visual-audio-contrast-visual-presentation">
						How to Meet 1.4.8 (Visual Presentation)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/visual-audio-contrast-visual-presentation.html">
						Understanding Success Criterion 1.4.8 (Visual Presentation)
					</a></li></ul><div class="note"><p class="prefix"><em>Note:</em> This technique must be combined with other techniques to meet <a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#visual-audio-contrast-visual-presentation">SC 1.4.8</a>. See <a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/visual-audio-contrast-visual-presentation.html"> Understanding SC 1.4.8</a> for details.</p></div></li></ul><div class="ua-issues"><h3 class="small-head" id="ua1.19.1"> User Agent and Assistive Technology Support Notes</h3><p>See <a href="/WAI/WCAG20/Techniques/ua-notes/client-side-script#SCR34">User Agent Support Notes for SCR34</a>.</p></div><h3 id="SCR34-description">Description</h3><div class="textbody"><p>The objective of this technique is to calculate the size and position of elements in a way that will scale appropriately as the text size is scaled. </p><p>There are four properties in JavaScript that help determine the size and position of elements: </p><ul><li><p>
               <code>offsetHeight</code> (the height of the element in pixels) </p></li><li><p>
               <code>offsetWidth</code> (the width of the element in pixels) </p></li><li><p>
               <code>offsetLeft</code> (the distance of the element from the left of its parent (offsetParent) in pixels) </p></li><li><p>
               <code>offsetTop</code> (the distance of the element from the top of its parent (offsetParent) in pixels) </p></li></ul><p>Calculating the height and width using <code>offsetHeight</code> and <code>offsetWidth</code> is straightforward, but when calculating an object's left and top position as absolute values, we need to consider the parent element. The <code>calculatePosition</code> function below iterates through all of an element's parent nodes to give a final value. The function takes two parameters; <code>objElement</code> (the name of the element in question), and the offset property (<code>offsetLeft</code> or <code>offsetTop</code>): </p></div><h3 class="small-head" id="SCR34-examples">Examples</h3><h4 class="small-head" id="SCR34-ex1">Example 1</h4><div class="example"><div class="textbody"><p>The Javascript function:</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
function calculatePosition(objElement, strOffset)
{
    var iOffset = 0;

    if (objElement.offsetParent)
    {
        do 
        {
            iOffset += objElement[strOffset];
            objElement = objElement.offsetParent;
        } while (objElement);
    }

    return iOffset;
}

</code></pre></div><div class="textbody"><p>The following example illustrates using the function above by aligning an object beneath a reference object, the same distance from the left: </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
// Get a reference object
var objReference = document.getElementById('refobject');
// Get the object to be aligned
var objAlign = document.getElementById('lineup');

objAlign.style.position = 'absolute';
objAlign.style.left = calculatePosition(objReference, 'offsetLeft') + 'px';
objAlign.style.top = calculatePosition(objReference, 'offsetTop') + objReference.offsetHeight + 'px'; 
</code></pre></div></div><h3 id="SCR34-resources">Resources</h3><div class="textbody"><p>Resources are for information purposes only, no endorsement implied.</p><ul><li><p>
                  <a href="https://msdn.microsoft.com/en-us/library/bb250395(VS.85).aspx#cssenhancements_topic3">MSDN: Fix the Box Instead of Thinking Outside It</a>
               </p></li></ul></div><h3 id="SCR34-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/C12">C12: Using percent for font sizes</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/C14">C14: Using em units for font sizes</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/C17">C17: Scaling form elements which contain text</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/C20">C20: Using relative measurements to set column widths so that lines can average 80 characters or less when the browser is resized</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/C24">C24: Using percentage values in CSS for container sizes</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G206">G206: Providing options within the content to switch to a layout that does not require the user to scroll horizontally to read a line of text</a></li></ul></div><h3 id="SCR34-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR34-procedure">Procedure</h4><ol class="enumar"><li><p>Open a page that is designed to adjust container sizes as text size changes. </p></li><li><p>Increase the text size up to 200% using the browser's text size adjustment (not the zoom feature). </p></li><li><p>Examine the text to ensure the text container size is adjusted to accommodate the size of the text. </p></li><li><p>Ensure that no text is "clipped" or has disappeared as a result of the increase in text size. </p></li></ol><h4 class="small-head" id="SCR34-results">Expected Results</h4><ul><li><p>Checks #3 and #4 are true.</p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR35" id="SCR35"> </a>SCR35: Making actions keyboard accessible by using the onclick event of anchors and buttons</h2><div class="applicability"><h3 id="SCR35-applicability">Applicability</h3><div class="textbody"><p>Script used with HTML or XHTML.</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#keyboard-operation-keyboard-operable">
				Success Criterion 2.1.1 (Keyboard)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#keyboard-operation-keyboard-operable">
						How to Meet 2.1.1 (Keyboard)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/keyboard-operation-keyboard-operable.html">
						Understanding Success Criterion 2.1.1 (Keyboard)
					</a></li></ul></li><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#keyboard-operation-all-funcs">
				Success Criterion 2.1.3 (Keyboard (No Exception))</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#keyboard-operation-all-funcs">
						How to Meet 2.1.3 (Keyboard (No Exception))
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/keyboard-operation-all-funcs.html">
						Understanding Success Criterion 2.1.3 (Keyboard (No Exception))
					</a></li></ul></li></ul><h3 id="SCR35-description">Description</h3><div class="textbody"><p>The objective of this technique is to demonstrate how to invoke a scripting function in a way that is keyboard accessible by attaching it to a keyboard-accessible control. In order to ensure that scripted actions can be invoked from the keyboard, they are associated with "natively actionable" HTML elements (links and buttons). The onclick event of these elements is device independent. While "onclick" sounds like it is tied to the mouse, the onclick event is actually mapped to the default action of a link or button. The default action occurs when the user clicks the element with a mouse, but it also occurs when the user focuses the element and hits enter or space, and when the element is triggered via the accessibility API.</p><p>This technique relies on client-side scripting. However, it is beneficial to provide a backup implementation or explanation for environments in which scripting is not available.  When using anchor elements to invoke a JavaScript action, a backup implementation or explanation is provided via the <code>href</code> attribute. When using buttons, it is provided via a form post. </p></div><h3 class="small-head" id="SCR35-examples">Examples</h3><h4 class="small-head" id="SCR35-ex1">Example 1</h4><div class="example"><div class="textbody"><p>Link that runs a script and has no fallback for non-scripted browsers. This approach should only be used when script is relied upon as an Accessibility Supported Technology.</p><p>Even though we do not want to navigate from this link, we must use the href attribute on the <code>a</code> element in order to make this a true link and get the proper eventing. In this case, we're using "#" as the link target, but you could use anything. This link will never be navigated.</p><p>The "return false;" at the end of the doStuff() event handling function tells the browser not to navigate to the URI. Without it, the page would refresh after the script ran. </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;script&gt; 
function doStuff()
 {
  //do stuff
    return false;
  }
&lt;/script&gt;
&lt;a href="#" onclick="return doStuff();"&gt;do stuff&lt;/a&gt;
</code></pre></div></div><h4 class="small-head" id="SCR35-ex2">Example 2</h4><div class="example"><div class="textbody"><p>Link that runs script, but navigates to another page when script is not available. This approach can be used to create sites that don't rely on script, if and only if the navigation target provides the same functionality as the script. This example is identical to the example 1, except that its href is now set to a real page, dostuff.htm. Dostuff.htm must provide the same functionality as the script.The "return false;" at the end of the doStuff() event handling function tells the browser not to navigate to the URI. Without it, the browser would navigate to dostuff.htm after the script ran.</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;script&gt; 
function doStuff() 
 {  
  //do stuff  
  return false; 
 }
&lt;/script&gt;
&lt;a href="dostuff.htm" onclick="return doStuff();"&gt;do stuff&lt;/a&gt;
</code></pre></div><div class="textbody"><p>A working example of this code is available. Refer to <a href="/WAI/WCAG20/Techniques/working-examples/SCR35/jslink.html" class="ex-ref">Creating Action Links using JavaScript</a>.</p></div></div><h4 class="small-head" id="SCR35-ex3">Example 3</h4><div class="example"><div class="textbody"><p>Button that runs a script and falls back to a form post for users without script. This approach can be used by sites that do not rely on script, if and only if the form post provides the same functionality as the script. The onsubmit="return false;" prevents the form from submitting. </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;script&gt;
  function doStuff()
 {
     //do stuff
 }
&lt;/script&gt;
&lt;form action="doStuff.aspx" onsubmit="return false;"&gt;
 &lt;input type="submit" value="Do Stuff" onclick="doStuff();" /&gt;
&lt;/form&gt;
</code></pre></div><div class="textbody"><p>A working example of this code is available. Refer to <a href="/WAI/WCAG20/Techniques/working-examples/SCR35/jsbutton.html" class="ex-ref">Creating Action Buttons using JavaScript</a>.</p></div></div><h4 class="small-head" id="SCR35-ex4">Example 4</h4><div class="example"><div class="textbody"><p>Button that runs a script, implemented with <code>input type="image"</code>. Note that an alt attribute must be added to the <code>input</code> to provide a text equivalent for the image. This approach should only be used when script is relied upon. </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;script&gt;
  function doStuff()
  {
     //do stuff
   return false;
  }
&lt;/script&gt;
&lt;input  type="image"  src="stuff.gif"  alt="Do stuff"  onclick="return doStuff();" /&gt;
</code></pre></div></div><h4 class="small-head" id="SCR35-ex5">Example 5</h4><div class="example"><div class="textbody"><p>Button that runs a script, implemented with <code>input type="submit"</code>, <code>input type="reset"</code> or <code>input type="button"</code>. This approach should only be used when script is relied upon.  </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;input type="submit" onclick="return doStuff();" value=”Do Stuff” /&gt;
</code></pre></div></div><h4 class="small-head" id="SCR35-ex6">Example 6</h4><div class="example"><div class="textbody"><p>Button that runs a script, implemented with <code>button</code>…<code>/button</code>. This is valuable when you want more control over the look of your button. In this particular example, the button contains both an icon and some text. This approach should only be used when script is relied upon. </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>
&lt;button onclick="return doStuff();"&gt;
 &lt;img src="stuff.gif" alt="stuff icon"&gt;
 Do Stuff
&lt;/button&gt;
</code></pre></div></div><h3 id="SCR35-resources">Resources</h3><div class="textbody"><p>Resources are for information purposes only, no endorsement implied.</p><ul><li><p>
                  <a href="http://www.w3.org/TR/REC-html40/interact/scripts.html">HTML 4.01 Scripts</a>
               </p></li><li><p>
                  <a href="http://www.w3.org/TR/REC-html40/interact/forms.html">HTML 4.01 Forms</a>
               </p></li><li><p>
                  <a href="http://www.w3.org/TR/REC-html40/struct/links.html">HTML 4.01 Links</a>
               </p></li><li><p>
                  <a href="http://www.w3.org/DOM/DOMTR">Document Object Model (DOM) Technical Reports</a>
               </p></li></ul></div><h3 id="SCR35-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G90">G90: Providing keyboard-triggered event handlers</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G108">G108: Using markup features to expose the name and role, allow user-settable properties to be directly set, and provide notification of changes</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/H91">H91: Using HTML form controls and links</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SCR20">SCR20: Using both keyboard and other device-specific functions</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SCR24">SCR24: Using progressive enhancement to open new windows on user request</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/F42">F42: Failure of Success Criteria 1.3.1, 2.1.1, 2.1.3, or 4.1.2 when emulating links</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/F59">F59: Failure of Success Criterion 4.1.2 due to using script to make div or span a user interface control in HTML without providing a role for the control</a></li></ul></div><h3 id="SCR35-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR35-procedure">Procedure</h4><p>For all script actions associated with <code>a</code>, <code>button</code>, or <code>input</code> elements: </p><ol class="enumar"><li><p>In a user agent that supports Scripting </p><ul><li><p>Click on the control with the mouse. </p></li><li><p>Check that the scripting action executes properly. </p></li><li><p>If the control is an anchor element, check that the URI in the <code>href</code> attribute of the anchor element is not invoked. </p></li><li><p>Check that it is possible to navigate to and give focus to the control via the keyboard.</p></li><li><p>Set keyboard focus to the control.</p></li><li><p>Check that pressing ENTER invokes the scripting action. </p></li><li><p>If the control is an anchor element, check that the URI in the <code>href</code> attribute of the anchor element is not invoked. </p></li></ul></li><li><p>In a user agent that does not support Scripting </p><ul><li><p>Click on the control with the mouse.</p></li><li><p>If the control is an anchor element, check that the URI in the <code>href</code> attribute of the anchor element is invoked. </p></li><li><p>Check that it is possible to navigate to and give focus to the control via the keyboard.</p></li><li><p>Set keyboard focus to the control.</p></li><li><p>If the control is an anchor element, check that pressing ENTER invokes the URI of the anchor element's <code>href</code> attribute.</p></li></ul></li></ol><h4 class="small-head" id="SCR35-results">Expected Results</h4><ul><li><p>All of the above checks are true. </p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR36" id="SCR36"> </a>SCR36: Providing a mechanism to allow users to display moving, scrolling, or auto-updating text in a static window or area</h2><div class="applicability"><h3 id="SCR36-applicability">Applicability</h3><div class="textbody"><p>Any technology that moves, blinks, or updates text and can create a static block of text. </p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#time-limits-required-behaviors">
				Success Criterion 2.2.1 (Timing Adjustable)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#time-limits-required-behaviors">
						How to Meet 2.2.1 (Timing Adjustable)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/time-limits-required-behaviors.html">
						Understanding Success Criterion 2.2.1 (Timing Adjustable)
					</a></li></ul></li></ul><h3 id="SCR36-description">Description</h3><div class="textbody"><p>Some Web pages display scrolling text because there is limited space available. Scrolling the text in a small text window makes the content available for users who can read quickly enough, but causes problems for users who read more slowly or use assistive technology. This technique provides a mechanism to stop the movement and make the entire block of text available statically. The text may be made available in a separate window or in a (larger) section of the page. Users can then read the text at their own speed. </p><p>This technique does not apply when the text that is moving can not be displayed all at once on the screen (e.g., a long chat conversation).</p><div class="note"><p class="prefix"><em>Note: </em>This technique can be used in combination with a style switching technique to present a page that is a <a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#conforming-alternate-versiondef" class="gl-ref">conforming alternate version</a> for non-conforming content. Refer to <a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/C29" class="tech-ref">C29: Using a style switcher to provide a conforming alternate version</a>  (CSS)
			 and <a href="http://www.w3.org/TR/UNDERSTANDING-WCAG20/conformance.html#uc-conforming-alt-versions-head" class="understanding-ref">Understanding Conforming Alternate Versions</a> for more information. </p></div></div><h3 class="small-head" id="SCR36-examples">Examples</h3><h4 class="small-head" id="SCR36-ex1">Example 1: Expanding Scrolling Text in Place </h4><div class="example"><div class="textbody"><p>A large block of text is scrolled through a small marquee area of the page. A button lets the user stop the scrolling and display the entire block of text. </p><div class="note"><p class="prefix"><em>Note: </em>This code example requires that both CSS and JavaScript be turned on and available. </p></div><p>The CSS component:</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>#scrollContainer {
        visibility: visible;
        overflow: hidden;
        top: 50px; left: 10px;
        background-color: darkblue;
      }
      .scrolling {
        position: absolute;
        width: 200px;
        height: 50px;
      }
      .notscrolling {
        width: 500px;
        margin:10px;
      }
      #scrollingText {
        top: 0px;
        color: white;
      }
      .scrolling #scrollingText {
        position: absolute;
      }
      &lt;/a&gt;    </code></pre></div><div class="textbody"><p>The script and HTML content:</p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>&lt;script type="text/javascript"&gt;

      var tid;
      function init() {
        var st = document.getElementById('scrollingText');
        st.style.top = '0px';
        initScrolling();
      }
      function initScrolling () {
        tid = setInterval('scrollText()', 300);
      }
      function scrollText () {
        var st = document.getElementById('scrollingText');
        if (parseInt(st.style.top) &gt; (st.offsetHeight*(-1) + 8)) {
          st.style.top = (parseInt(st.style.top) - 5) + 'px';
        } else {
          var sc = document.getElementById('scrollContainer');
          st.style.top = parseInt(sc.offsetHeight) + 8 + 'px';
        }
      }
      function toggle() {
        var scr = document.getElementById('scrollContainer');
        if (scr.className == 'scrolling') {
          scr.className = 'notscrolling';
          clearInterval(tid);
           document.getElementById('scrollButton').value="Shrink";
        } else {
          scr.className = 'scrolling';
          initScrolling();
          document.getElementById('scrollButton').value="Expand";
        }
      }
  &lt;input type="button" id="scrollButton" value="Expand" onclick="toggle()" /&gt;
  &lt;div id="scrollContainer" class="scrolling"&gt;
    &lt;div id="scrollingText" class="on"&gt;
    .... Text to be scrolled ...
    &lt;/div&gt;
  &lt;/div&gt;
...
</code></pre></div><div class="textbody"><p>Working example of this code: <a href="/WAI/WCAG20/Techniques/working-examples/SCR36/scrolltext.html" class="ex-ref">Expanding Scrolling Text in Place</a>.</p></div></div><h3 id="SCR36-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G4">G4: Allowing the content to be paused and restarted from where it was paused</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G187">G187: Using a technology to include blinking content that can be turned off via the user agent</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SCR33">SCR33: Using script to scroll content, and providing a mechanism to pause it</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SCR22">SCR22: Using scripts to control blinking and stop it in five seconds or less</a></li></ul></div><h3 id="SCR36-tests">Tests</h3><div class="textbody"><p>No tests available for this technique.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR37" id="SCR37"> </a>SCR37: Creating Custom Dialogs in a Device Independent Way</h2><div class="applicability"><h3 id="SCR37-applicability">Applicability</h3><div class="textbody"><p>HTML and XHTML used with script.</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#navigation-mechanisms-focus-order">
				Success Criterion 2.4.3 (Focus Order)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20160105/#navigation-mechanisms-focus-order">
						How to Meet 2.4.3 (Focus Order)
					</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-UNDERSTANDING-WCAG20-20160317/navigation-mechanisms-focus-order.html">
						Understanding Success Criterion 2.4.3 (Focus Order)
					</a></li></ul></li></ul><h3 id="SCR37-description">Description</h3><div class="textbody"><p>Site designers often want to create dialogs that do not use the pop-up windows supplied by the browser. This is typically accomplished by enclosing the dialog contents in a <code>div</code> and placing the <code>div</code> above the page content using z-order and absolute positioning in CSS. </p><p>To be accessible, these dialogs must follow a few simple rules. </p><ol class="enumar"><li><p>Trigger the script that launches the dialog from the <code>onclick</code> event of a link or button.</p></li><li><p>Place the dialog <code>div</code> into the Document Object Model (DOM) immediately after the element that triggered it. The triggering element will maintain focus, and inserting the dialog content after that element will make the content inside the dialog next in the screen-reader reading order and next in the tab order. The dialog can still be absolutely positioned to be elsewhere on the page visually. This can be done either by creating the dialog in the HTML and hiding it with CSS, as in the example below, or by inserting it immediately after the triggering element with script. </p></li><li><p>Ensure that the HTML inside the dialog div meets the same accessibility standard as other content.</p></li></ol><p>It is also nice, but not always necessary, to make the launching link toggle the dialog open and closed, and to close the dialog when the keyboard focus leaves it. </p></div><h3 class="small-head" id="SCR37-examples">Examples</h3><h4 class="small-head" id="SCR37-ex1">Example 1: An options button that opens a dialog</h4><div class="example"><div class="textbody"><p>The HTML for this example includes a triggering Element, in this case a button, and a div that acts as the frame for the dialog. </p><p>The triggering element is a button and the script is triggered from the onclick event. This sends the appropriate events to the operating system so that assistive technology is aware of the change in the DOM. </p><p>In this example, the Submit and Reset buttons inside the dialog simply hide the <code>div</code>. </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>...
&lt;button onclick="TogglePopup(event,true)"
	name="pop0001"&gt;Options&lt;/button&gt;

&lt;div class="popover" id="pop0001"&gt;
  &lt;h3&gt;Edit Sort Information&lt;/h3&gt;
  &lt;form action="default.htm" onsubmit="this.parentNode.style.display='none'; return false;" onreset="this.parentNode.style.display='none'; return false;"&gt;
    &lt;fieldset&gt;
      &lt;legend&gt;Sort Order&lt;/legend&gt; 
      &lt;input type="radio" name="order" id="order_alpha" /&gt;&lt;label for="order_alpha"&gt;Alphabetical&lt;/label&gt;
      &lt;input type="radio" name="order" id="order_default" checked="true" /&gt;&lt;label for="order_default"&gt;Default&lt;/label&gt;
    &lt;/fieldset&gt;
&lt;div class="buttons"&gt;
  &lt;input type="submit" value="OK" /&gt;
  &lt;input type="reset" value="Cancel" /&gt;
&lt;/div&gt;
&lt;/form&gt;

&lt;/div&gt;
...
</code></pre></div><div class="textbody"><p>The <code>div</code>, heading and <code>form</code> elements are styled with CSS to look like a dialog. </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>...
a { color:blue; }
a.clickPopup img { border:none; width:0; }

div.popover { position:absolute; display:none; border:1px outset; background-color:beige; font-size:80%; background-color:#eeeeee; color:black; }
div.popover h3 { margin:0; padding:0.1em 0.5em; background-color:navy; color:white; }
#pop0001 { width:20em; }
#pop0001 form { margin:0; padding:0.5em; }
#pop0001 fieldset { margin-bottom:0.3em; padding-bottom:0.5em; }
#pop0001 input, #pop0001 label { vertical-align:middle; }
#pop0001 div.buttons { text-align:right; }
#pop0001 div.buttons input { width:6em; }
...
</code></pre></div><div class="textbody"><p>The script toggles the display of the popup <code>div</code>, showing it and hiding it. </p></div><div class="code"><p><strong>Example Code:</strong></p><pre><code>...
function TogglePopup(evt,show)
{
	HarmonizeEvent(evt);
	var src = evt.target;
	if ("click" == evt.type)
	{
		evt.returnValue = false;
	}
	var popID = src.getAttribute("name");
	if (popID)
	{
		var popup = document.getElementById(popID);
		if (popup)
		{
			if (true == show)
			{
				popup.style.display = "block";
			}
			else if (false == show)
			{
				popup.style.display = "none";
			}
			else
			{
				popup.style.display = "block" == popup.style.display ? "none" : "block";
			}
			if ("block" == popup.style.display)
			{
				//window.alert(document.documentElement.scrollHeight);
				popup.style.top = ((document.documentElement.offsetHeight - popup.offsetHeight) / 2 ) + 'px';
				popup.style.left = ((document.documentElement.offsetWidth - popup.offsetWidth) / 2) + 'px';
			}
		}
	}
}

function SubmitForm(elem)
{ 
	elem.parentNode.style.display='none'; 
	return false;
}

function ResetForm(elem)
{ 
	elem.parentNode.style.display='none'; 
	return false;
}
...
</code></pre></div><div class="textbody"><p>A working example, <a href="/WAI/WCAG20/Techniques/working-examples/SCR37/default.htm" class="ex-ref">an options button that opens a dialog</a>, is available. </p></div></div><h3 id="SCR37-resources">Resources</h3><div class="textbody"><p>Resources are for information purposes only, no endorsement implied.</p><ul><li><p>Microsoft Developer Network Whitepaper:<a href="http://download.microsoft.com/download/0/f/5/0f5e941c-c495-401a-9031-eab8315da35e/writing_accessible_web_applications.doc"> Writing Accessible Web Applications</a> by Cynthia C. Shelly and George Young. (Microsoft Word Format)</p></li><li><p>
                  <a href="https://msdn.microsoft.com/en-us/library/ms695716.aspx">Microsoft Active Accessibility 2.0 SDK</a>. Includes Inspect32.exe and other MSAA tools.</p></li><li><p>
                  <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/dd318521(v=vs.85).aspx">Instructions for the Inspect tool</a>
               </p></li><li><p>
                  <a href="http://www.eramp.com/david/name-role-value-using-inspect.htm">Using the Inspect tool to find name Name, Role and Value for Javascript</a>
               </p></li><li><p>
                  <a href="http://www.microsoft.com/en-us/download/details.aspx?id=18359">Microsoft Internet Explorer Developer Toolbar.</a>. Allows examination of script-generated DOM in Microsoft Internet Explorer</p></li><li><p>
                  <a href="http://getfirebug.com/">Firebug</a>. Allows examination of script-generated DOM in Firefox. </p></li></ul></div><h3 id="SCR37-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SCR26">SCR26: Inserting dynamic content into the Document Object Model immediately following its trigger element</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G59">G59: Placing the interactive elements in an order that follows sequences and relationships within the content</a></li></ul></div><h3 id="SCR37-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR37-procedure">Procedure</h4><ol class="enumar"><li><p>Find all areas of the page that trigger dialogs that are not pop-up windows. </p></li><li><p>Check that the dialogs can be opened by tabbing to the area and hitting enter. </p></li><li><p>Check that, once opened, the dialog is next in the tab order. </p></li><li><p>Check that the dialogs are triggered from the click event of a button or a link. </p></li><li><p>Using a tool that allows you to inspect the DOM generated by script, check that the dialog is next in the DOM. </p></li></ol><h4 class="small-head" id="SCR37-results">Expected Results</h4><ul><li><p>Checks #2, #3, #4 and #5 are true. </p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div></div><div class="technique"><hr class="divider" title="Beginning of new technique"/><h2><a name="SCR38" id="SCR38"> </a>SCR38: Creating a conforming alternate version for a web page designed with progressive enhancement</h2><div class="applicability"><h3 id="SCR38-applicability">Applicability</h3><div class="textbody"><p>HTML with scripting.</p></div></div><p class="referenced">This technique relates to:</p><ul><li><a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#cc1">
					Conformance Requirement 1 (Conformance Level)
				</a></li></ul><h3 id="SCR38-description">Description</h3><div class="textbody"><p>This objective of this technique is to offer a conforming alternate version for a web page designed with progressive enhancement. The technique demonstrates how to use a scripting technique to accomplish this by:</p><ol class="enumar"><li><p>Storing the initial pre-enhanced version of the web page so that it can act as a "conforming alternate version" for any later enhanced versions of the content; and</p></li><li><p>Inserting a mechanism into all enhanced versions of the web page which allows a user to revert the content back to the stored pre-enhanced Alternate Version.</p></li></ol><p>Web pages designed with progressive enhancement detect features in the web-enabled accessing device (size, capability and software) to allow those supported web technologies to be applied in layers on top of an HTML foundation. The basic content and functionality of such a web page are available through the HTML foundation to anyone using a more simple web-enabled accessing device, whilst enhanced versions of the page are created to suit the different features in more advanced accessing devices.</p><p>The current guidance for web pages delivered in alternate versions reads: "Note 4: Alternate versions may be provided to accommodate different technology environments or user groups. Each version should be as conformant as possible. One version would need to be fully conformant in order to meet conformance requirement 1." With regard to web pages designed with progressive enhancement this leaves the problem of which version to select as the one fully conformant version - all whilst trying to ensure that no set of users is disadvantaged by that choice.</p><p>One solution to this challenge is to select the pre-enhanced version of the web page (e.g. the DOM state created solely from the HTML in the source code in the absence of support for scripts, styles or non-HTML plugins) as the "fully conformant version", due to its broad reach, with regard to support, across all the possible web-enabled devices accessing the content.</p><div class="note"><p class="prefix"><em>Note: </em>This technique removes all scripts, styles, and plugins, but it is important to state that this is not required for conformance with WCAG 2.0. An author could use a similar technique, but retain a reduced set of styles and scripts in the “pre-enhanced” version.</p></div><p>While this technique offers a way to base conformance claims on a single version, authors should continue to work to ensure that each enhanced version of the web page is as conformant as possible.</p></div><h3 class="small-head" id="SCR38-examples">Examples</h3><h4 class="small-head" id="SCR38-ex1">Example 1: Using JavaScript</h4><div class="example"><div class="textbody"><p>The example uses JavaScript in the "accToggle.js" file to store the initial pre-enhanced version of the web page, created solely from the HTML in the source code, so that it can act as a "conforming alternate version" for any later enhanced versions of the web page; and inserts a toggle link into all enhanced versions of the web page which allows a user to revert the web page back to the stored pre-enhanced "Conforming Alternate Version". Note: The "sayhello.js" file is simply there as an example payload external file, and is to be replaced by any other external scripts which are desired.</p><p>The script in the acctoggle.js file stores the pre-enhanced version - assigning the version the url postfix #accessible. Clicking the "WCAG 2.0 conforming alternate version" link (inserted as the first child of the <code>body</code> element in any enhanced versions) changes the url to include the postfix "#accessible" which then resets the html located in the <code>body</code> element and the <code>head</code> element to pre-enhanced code. The pre-enhanced state can be reached from the link, or directly from a url typed into the browser. In addition, a link is inserted into the pre-enhanced "Conforming Alternate Version" which allows the user to re-enhance the web page (something which can also be done using the web browser's back button).</p><p>acctoggle.js source code:</p><code>
window.onload = function(event) {

    // store pre-enhanced element content
    var initialHead = document.head.innerHTML;
    var initialBody = document.body.innerHTML;
    var initialURL = location.href;
    
    var runOnce = function() {
        // payload you want to run per page call - e.g. Google Analytics code
    }
    
    var setup = function() {
        // create conforming alternate version link

        var toggleEnhanced = document.querySelector("#toggle_enhanced");
        if (toggleEnhanced) {
            toggleEnhanced.outerHTML = "";
        }
        
        var nel = document.createElement("a");
        nel.id = "acctoggle";
        nel.setAttribute("href", "#accessible");
        nel.innerHTML = "WCAG 2.0 conforming alternate version";
        document.body.insertBefore(nel, document.body.firstChild);
        
        // payload
        var s = document.createElement("SCRIPT");
        s.setAttribute("src", "sayhello.js");
        document.querySelector("HEAD").appendChild(s);   
       }
    
    setup();
    runOnce();
    
    window.onpopstate = function(event) {
        if (location.href.indexOf("#accessible") != -1) {
            // revert element contents to pre-enhanced version
            document.head.innerHTML = initialHead;
            document.body.innerHTML = initialBody;
            
            // create enhanced version link
            var el = document.createElement("a");
            el.id = "toggle_enhanced";
            el.setAttribute("href", "");
            el.innerHTML = "Enhanced version";
            var back = function(e) {
                 e.preventDefault();
                 window.history.back();
            }
            el.addEventListener("click", back, false);
            document.body.insertBefore(el, document.body.firstChild);
        }
        if (location.href == initialURL) {
            setup();
        }
    };
}
		 </code><p>HTML web page source code:</p><code>
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
    &lt;head&gt;
        &lt;title&gt;Evaluera Ltd&lt;/title&gt;
        &lt;meta charset="UTF-8" /&gt;
        &lt;script src="accSwitch.js"&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt; 
        &lt;h1&gt;Test Page&lt;/h1&gt;
        &lt;p&gt;Say: &lt;span id="change"&gt;Goodbye&lt;/span&gt;&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;			
		 </code><p>sayhello.js source code</p><code>
var change = document.querySelector("#change");
change.innerText = "Hello";			
		 </code></div></div><h4 class="small-head" id="SCR38-ex2">Example 2: Using EnhanceJS - A Javascript framework designed to improve the application of Progressive Enhancement</h4><div class="example"><div class="textbody"><p><a href="https://code.google.com/p/enhancejs/">EnhanceJS</a> is an open source JavaScript framework "designed to improve the application of Progressive Enhancement by first testing browser capabilities for key Javascript and CSS support before applying advanced styles and scripts to the page". In addition, the default EnhanceJS script automatically creates a toggle link in any post-enhanced versions of the page which allows a user to return the web page to its pre-enhanced state (in EnhanceJS with default settings this is called the "low bandwidth version"). The setting have been changed in EnhanceJS to indicate that the pre-enhanced state is to be considered the "WCAG 2.0 conforming alternate version", rather than the "low bandwidth version".</p><p>HTML Component:</p><code>
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
    &lt;head&gt;
    &lt;script type="text/javascript" src="enhance.js"&gt;&lt;/script&gt;
    &lt;script type="text/javascript"&gt;
        // Run capabilities test
        enhance({
            loadStyles: [
                "example.css"
            ], 
            loadScripts: [
                "example.js"
            ],
            // text shown in enhanced mode
            forceFailText: "WCAG 2.0 conforming alternate version",
            // text shown in accessible mode
            forcePassText: "Enhanced version"
        });
    &lt;/script&gt;
    &lt;/head&gt;
    ....

</code></div></div><h3 id="SCR38-resources">Resources</h3><div class="textbody"><p>Resources are for information purposes only, no endorsement implied.</p><ul><li><p>
                  <a href="http://www.w3.org/TR/2012/NOTE-WCAG20-TECHS-20120103/C29#C29-sa1">Using Cookies</a></p></li><li><p><a href="http://www.w3.org/TR/2012/NOTE-WCAG20-TECHS-20120103/C29#C29-sa2">Progressive Enhancement and Unobtrusive JavaScript</a></p></li></ul></div><h3 id="SCR38-related-techs">Related Techniques</h3><div class="textbody"><ul><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/G136">G136: Providing a link at the beginning of a nonconforming Web page that points to a conforming alternate version</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/C29">C29: Using a style switcher to provide a conforming alternate version</a></li><li><a href="http://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20160317/SVR4">SVR4: Allowing users to provide preferences for the display of conforming alternate versions</a></li></ul></div><h3 id="SCR38-tests">Tests</h3><div class="textbody"><h4 class="small-head" id="SCR38-procedure">Procedure</h4><ol class="enumar"><li><p>Check enhanced versions of the web page contain a link to the "Conforming Alternate Version".</p></li><li><p>Check that the alternate version is a <a href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#conforming-alternate-versiondef" class="gl-ref">conforming alternate version</a> of the original page and that it conforms to WCAG 2.0 at the claimed conformance level.</p></li></ol><h4 class="small-head" id="SCR38-results">Expected Results</h4><ul><li><p>Checks #1 and #2 are true. </p></li></ul><p>If this is a sufficient technique for a success criterion, failing this test procedure does not necessarily mean that the success criterion has not been satisfied in some other way, only that this technique has not been successfully implemented and can not be used to claim conformance.</p></div><hr class="divider" title="End of techniques"/></div></div></div><div class="back"/></div><div class="footer"><p class="copyright">This Web page is part of <a href="Overview.html">Techniques for WCAG 2.0</a>. The entire document is also available as a <a href="complete.html">single HTML file</a>. See the <a href="http://www.w3.org/WAI/intro/wcag20">The WCAG 2.0 Documents</a> for an explanation of how this document fits in with other Web Content Accessibility Guidelines (WCAG) 2.0 documents.
          	</p><p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2012 <a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p></div><script src="//www.w3.org/scripts/TR/2016/fixup.js" type="text/javascript"/></body></html>